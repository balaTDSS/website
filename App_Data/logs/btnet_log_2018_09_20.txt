2018-09-20 10:32:26  caught exception in util.set_context:Request is not available in this context
2018-09-20 10:32:26  threadproc_votes
2018-09-20 10:32:26  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 10:32:26  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 10:32:27  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 10:32:28  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 10:32:28  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 10:32:29  elapsed milliseconds:1062
2018-09-20 10:32:29  elapsed milliseconds:0397
2018-09-20 10:32:29  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 10:32:29 http://192.168.0.31/default.aspx sql=
select count(1) from users
2018-09-20 10:32:29  elapsed milliseconds:0105
2018-09-20 10:32:29  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 10:32:29  elapsed milliseconds:0303
2018-09-20 10:32:30  done creating Lucene index
2018-09-20 11:14:31  caught exception in util.set_context:Request is not available in this context
2018-09-20 11:14:31  threadproc_votes
2018-09-20 11:14:31  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 11:14:31  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 11:14:31  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 11:14:31 http://192.168.0.31/default.aspx sql=
select count(1) from users
2018-09-20 11:14:31  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 11:14:31  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 11:14:31  elapsed milliseconds:0003
2018-09-20 11:14:31  elapsed milliseconds:0092
2018-09-20 11:14:31  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 11:14:32  elapsed milliseconds:0027
2018-09-20 11:14:32  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 11:14:32  elapsed milliseconds:0018
2018-09-20 11:14:32  done creating Lucene index
2018-09-20 11:15:21 http://192.168.0.31/default.aspx sql=
select count(1) from users
2018-09-20 11:15:21 http://192.168.0.31/default.aspx sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'dep1'
2018-09-20 11:15:21 http://192.168.0.31/default.aspx elapsed milliseconds:0002
2018-09-20 11:15:21 http://192.168.0.31/default.aspx sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 15
2018-09-20 11:15:21 http://192.168.0.31/default.aspx sql=
select us_id from users where us_username = N'dep1'
2018-09-20 11:15:21 http://192.168.0.31/default.aspx elapsed milliseconds:0001
2018-09-20 11:15:21 http://192.168.0.31/default.aspx guid=a459d473-b5d5-4bb6-bd40-b78d80538f5b
2018-09-20 11:15:21 http://192.168.0.31/default.aspx sql=
insert into sessions (se_id, se_user) values('a459d473-b5d5-4bb6-bd40-b78d80538f5b', 15)
2018-09-20 11:15:21 http://192.168.0.31/default.aspx AppPath:
2018-09-20 11:15:21 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a459d473-b5d5-4bb6-bd40-b78d80538f5b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a459d473-b5d5-4bb6-bd40-b78d80538f5b'
and us_active = 1
2018-09-20 11:15:21 http://192.168.0.31/bugs.aspx elapsed milliseconds:0009
2018-09-20 11:15:21 http://192.168.0.31/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 11:15:22 http://192.168.0.31/bugs.aspx elapsed milliseconds:0830
2018-09-20 11:15:22 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 15
or isnull(qu_org,0) = 6
order by qu_desc
2018-09-20 11:15:22 http://192.168.0.31/bugs.aspx elapsed milliseconds:0016
2018-09-20 11:15:22 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 15)
2018-09-20 11:15:22 http://192.168.0.31/bugs.aspx elapsed milliseconds:0006
2018-09-20 11:15:22 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 15 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 15
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:15:22 http://192.168.0.31/bugs.aspx elapsed milliseconds:0043
2018-09-20 11:15:25 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a459d473-b5d5-4bb6-bd40-b78d80538f5b';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a459d473-b5d5-4bb6-bd40-b78d80538f5b'
and us_active = 1
2018-09-20 11:15:25 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:15:25 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 13
2018-09-20 11:15:25 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected',’open’,’In-Process’, ‘Programing Completed’,’QC Completed’,’Re-Open’,'Hold') then  'New' else st_name end,'')[status],
 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 15 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 15
					and pu_permission_level = 0)) order by bg_id desc

2018-09-20 11:15:27 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'a459d473-b5d5-4bb6-bd40-b78d80538f5b'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 11:15:27 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:15:30 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:15:30 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-09-20 11:15:30 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0002
2018-09-20 11:15:30 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-09-20 11:15:30 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'admin'
2018-09-20 11:15:30 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:15:30 http://192.168.0.31/default.aspx?msg=logged+off guid=aeaf576f-41d1-4b81-b492-26c94e73e6af
2018-09-20 11:15:30 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('aeaf576f-41d1-4b81-b492-26c94e73e6af', 1)
2018-09-20 11:15:30 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 11:15:30 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af'
and us_active = 1
2018-09-20 11:15:31 http://192.168.0.31/bugs.aspx elapsed milliseconds:0011
2018-09-20 11:15:31 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 11:15:31 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 11:15:31 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-09-20 11:15:31 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:15:31 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:15:31 http://192.168.0.31/bugs.aspx elapsed milliseconds:0014
2018-09-20 11:15:34 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af'
and us_active = 1
2018-09-20 11:15:34 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:15:34 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:15:34 http://192.168.0.31/queries.aspx elapsed milliseconds:0034
2018-09-20 11:15:47 http://192.168.0.31/edit_query.aspx?id=13 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af'
and us_active = 1
2018-09-20 11:15:47 http://192.168.0.31/edit_query.aspx?id=13 elapsed milliseconds:0016
2018-09-20 11:15:47 http://192.168.0.31/edit_query.aspx?id=13 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:15:47 http://192.168.0.31/edit_query.aspx?id=13 elapsed milliseconds:0017
2018-09-20 11:15:47 http://192.168.0.31/edit_query.aspx?id=13 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 13
2018-09-20 11:15:47 http://192.168.0.31/edit_query.aspx?id=13 elapsed milliseconds:0001
2018-09-20 11:17:58 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af'
and us_active = 1
2018-09-20 11:17:58 http://192.168.0.31/queries.aspx elapsed milliseconds:0009
2018-09-20 11:17:58 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:17:58 http://192.168.0.31/queries.aspx elapsed milliseconds:0006
2018-09-20 11:18:00 http://192.168.0.31/edit_query.aspx?id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af'
and us_active = 1
2018-09-20 11:18:00 http://192.168.0.31/edit_query.aspx?id=11 elapsed milliseconds:0000
2018-09-20 11:18:00 http://192.168.0.31/edit_query.aspx?id=11 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:18:00 http://192.168.0.31/edit_query.aspx?id=11 elapsed milliseconds:0000
2018-09-20 11:18:00 http://192.168.0.31/edit_query.aspx?id=11 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 11
2018-09-20 11:18:00 http://192.168.0.31/edit_query.aspx?id=11 elapsed milliseconds:0000
2018-09-20 11:18:11 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af'
and us_active = 1
2018-09-20 11:18:11 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:18:11 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:18:11 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:18:14 http://192.168.0.31/edit_query.aspx?id=13 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af'
and us_active = 1
2018-09-20 11:18:14 http://192.168.0.31/edit_query.aspx?id=13 elapsed milliseconds:0000
2018-09-20 11:18:14 http://192.168.0.31/edit_query.aspx?id=13 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:18:14 http://192.168.0.31/edit_query.aspx?id=13 elapsed milliseconds:0000
2018-09-20 11:18:14 http://192.168.0.31/edit_query.aspx?id=13 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 13
2018-09-20 11:18:14 http://192.168.0.31/edit_query.aspx?id=13 elapsed milliseconds:0000
2018-09-20 11:21:13 http://192.168.0.31/edit_query.aspx?id=13 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af'
and us_active = 1
2018-09-20 11:21:13 http://192.168.0.31/edit_query.aspx?id=13 elapsed milliseconds:0006
2018-09-20 11:21:13 http://192.168.0.31/edit_query.aspx?id=13 sql=
select count(1) from queries where qu_desc = N'Deployment' and qu_id <> 13
2018-09-20 11:21:13 http://192.168.0.31/edit_query.aspx?id=13 sql=
update queries set
				qu_desc = N'Deployment',
				qu_sql = N'select isnull(pr_background_color,''#ffffff''), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'''') [project], isnull(bg_project_custom_dropdown_value1,'''') [Version], isnull(og_name,'''') [organization], isnull(ct_name,'''') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'''') [priority], isnull(asg.us_username,'''') [assigned to], 
 --isnull(st_name,'''') [status],
 isnull(case when st_name IN(''Waiting for approval'',''Approved'',''Rejected'',''open'',''In-process'',''Programming Completed'',''QC Completed'',''Re-Open'',''Hold'') then  ''New'' else st_name end,'''')[status],
 isnull(lu.us_username,'''') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = $ME 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
 order by bg_id desc
',
				qu_user = 0,
				qu_org = 6
				where qu_id = 13
2018-09-20 11:21:13 http://192.168.0.31/edit_query.aspx?id=13 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'aeaf576f-41d1-4b81-b492-26c94e73e6af'
and us_active = 1
2018-09-20 11:21:13 http://192.168.0.31/edit_query.aspx?id=13 elapsed milliseconds:0000
2018-09-20 11:21:13 http://192.168.0.31/edit_query.aspx?id=13 sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:21:13 http://192.168.0.31/edit_query.aspx?id=13 elapsed milliseconds:0005
2018-09-20 11:21:15 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'aeaf576f-41d1-4b81-b492-26c94e73e6af'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 11:21:15 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:21:19 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:21:19 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'dep1'
2018-09-20 11:21:19 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0003
2018-09-20 11:21:19 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 15
2018-09-20 11:21:19 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'dep1'
2018-09-20 11:21:19 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0002
2018-09-20 11:21:19 http://192.168.0.31/default.aspx?msg=logged+off guid=c33db820-7a9f-4c90-ba8d-88979c3097bd
2018-09-20 11:21:19 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('c33db820-7a9f-4c90-ba8d-88979c3097bd', 15)
2018-09-20 11:21:19 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 11:21:19 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c33db820-7a9f-4c90-ba8d-88979c3097bd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c33db820-7a9f-4c90-ba8d-88979c3097bd'
and us_active = 1
2018-09-20 11:21:19 http://192.168.0.31/bugs.aspx elapsed milliseconds:0010
2018-09-20 11:21:19 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 15
or isnull(qu_org,0) = 6
order by qu_desc
2018-09-20 11:21:19 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 11:21:19 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 15)
2018-09-20 11:21:19 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 11:21:19 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 15 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 15
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:21:19 http://192.168.0.31/bugs.aspx elapsed milliseconds:0015
2018-09-20 11:21:22 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c33db820-7a9f-4c90-ba8d-88979c3097bd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c33db820-7a9f-4c90-ba8d-88979c3097bd'
and us_active = 1
2018-09-20 11:21:22 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:21:22 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 13
2018-09-20 11:21:22 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected','open','In-process','Programming Completed','QC Completed','Re-Open','Hold') then  'New' else st_name end,'')[status],
 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 15 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 15
					and pu_permission_level = 0)) order by bg_id desc

2018-09-20 11:21:22 http://192.168.0.31/bugs.aspx elapsed milliseconds:0028
2018-09-20 11:21:29 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'c33db820-7a9f-4c90-ba8d-88979c3097bd'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 11:21:29 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:21:34 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:21:34 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'dev1'
2018-09-20 11:21:34 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0001
2018-09-20 11:21:34 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 2
2018-09-20 11:21:34 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'dev1'
2018-09-20 11:21:34 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:21:34 http://192.168.0.31/default.aspx?msg=logged+off guid=b5f7f30d-2fef-485e-9143-be3de69edf27
2018-09-20 11:21:34 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('b5f7f30d-2fef-485e-9143-be3de69edf27', 2)
2018-09-20 11:21:34 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 11:21:34 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'b5f7f30d-2fef-485e-9143-be3de69edf27';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'b5f7f30d-2fef-485e-9143-be3de69edf27'
and us_active = 1
2018-09-20 11:21:34 http://192.168.0.31/bugs.aspx elapsed milliseconds:0007
2018-09-20 11:21:34 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 2
or isnull(qu_org,0) = 2
order by qu_desc
2018-09-20 11:21:34 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:21:34 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 2)
2018-09-20 11:21:34 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:21:34 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by],bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 2 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status <> 5 and bg_assigned_to_user = 2  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 2
					and pu_permission_level = 0))  ) order by bg_id desc
2018-09-20 11:21:34 http://192.168.0.31/bugs.aspx elapsed milliseconds:0012
2018-09-20 11:21:36 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'b5f7f30d-2fef-485e-9143-be3de69edf27';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'b5f7f30d-2fef-485e-9143-be3de69edf27'
and us_active = 1
2018-09-20 11:21:36 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:21:36 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 12
2018-09-20 11:21:36 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected', 'Ready to deploy','Hold') then  'New' else st_name end,'')[status],
 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 2 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 2
					and pu_permission_level = 0)) order by bg_id desc

2018-09-20 11:21:36 http://192.168.0.31/bugs.aspx elapsed milliseconds:0017
2018-09-20 11:21:43 http://192.168.0.31/ajax.aspx?bugid=28 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'b5f7f30d-2fef-485e-9143-be3de69edf27';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'b5f7f30d-2fef-485e-9143-be3de69edf27'
and us_active = 1
2018-09-20 11:21:43 http://192.168.0.31/ajax.aspx?bugid=28 elapsed milliseconds:0000
2018-09-20 11:21:43 http://192.168.0.31/ajax.aspx?bugid=28 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 2
where bg_id = 28
2018-09-20 11:21:43 http://192.168.0.31/ajax.aspx?bugid=28 elapsed milliseconds:0002
2018-09-20 11:21:43 http://192.168.0.31/ajax.aspx?bugid=28 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 28
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 11:21:43 http://192.168.0.31/ajax.aspx?bugid=28 elapsed milliseconds:0009
2018-09-20 11:21:45 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'b5f7f30d-2fef-485e-9143-be3de69edf27'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 11:21:45 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:21:50 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:21:50 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-09-20 11:21:50 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0003
2018-09-20 11:21:50 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-09-20 11:21:50 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'admin'
2018-09-20 11:21:50 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:21:50 http://192.168.0.31/default.aspx?msg=logged+off guid=128d74f8-89f8-4e69-b09c-7bcffd3dc67f
2018-09-20 11:21:50 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('128d74f8-89f8-4e69-b09c-7bcffd3dc67f', 1)
2018-09-20 11:21:50 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 11:21:50 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '128d74f8-89f8-4e69-b09c-7bcffd3dc67f';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '128d74f8-89f8-4e69-b09c-7bcffd3dc67f'
and us_active = 1
2018-09-20 11:21:50 http://192.168.0.31/bugs.aspx elapsed milliseconds:0011
2018-09-20 11:21:50 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 11:21:50 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 11:21:50 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-09-20 11:21:50 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 11:21:50 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:21:50 http://192.168.0.31/bugs.aspx elapsed milliseconds:0014
2018-09-20 11:21:52 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '128d74f8-89f8-4e69-b09c-7bcffd3dc67f';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '128d74f8-89f8-4e69-b09c-7bcffd3dc67f'
and us_active = 1
2018-09-20 11:21:52 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:21:52 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:21:52 http://192.168.0.31/queries.aspx elapsed milliseconds:0005
2018-09-20 11:22:01 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '128d74f8-89f8-4e69-b09c-7bcffd3dc67f';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '128d74f8-89f8-4e69-b09c-7bcffd3dc67f'
and us_active = 1
2018-09-20 11:22:01 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:22:01 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 11:22:01 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:22:01 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-09-20 11:22:01 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:22:01 http://192.168.0.31/bugs.aspx elapsed milliseconds:0003
2018-09-20 11:22:06 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'128d74f8-89f8-4e69-b09c-7bcffd3dc67f'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 11:22:06 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:22:10 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:22:10 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'qc1'
2018-09-20 11:22:10 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0003
2018-09-20 11:22:10 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 3
2018-09-20 11:22:10 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'qc1'
2018-09-20 11:22:10 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:22:10 http://192.168.0.31/default.aspx?msg=logged+off guid=e1893f68-9e89-4c14-8304-a3d765cfc165
2018-09-20 11:22:10 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('e1893f68-9e89-4c14-8304-a3d765cfc165', 3)
2018-09-20 11:22:10 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 11:22:10 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'e1893f68-9e89-4c14-8304-a3d765cfc165';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'e1893f68-9e89-4c14-8304-a3d765cfc165'
and us_active = 1
2018-09-20 11:22:10 http://192.168.0.31/bugs.aspx elapsed milliseconds:0012
2018-09-20 11:22:10 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 3
or isnull(qu_org,0) = 7
order by qu_desc
2018-09-20 11:22:10 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 11:22:10 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 3)
2018-09-20 11:22:10 http://192.168.0.31/bugs.aspx elapsed milliseconds:0003
2018-09-20 11:22:10 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 3 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 3
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:22:10 http://192.168.0.31/bugs.aspx elapsed milliseconds:0013
2018-09-20 11:22:19 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'e1893f68-9e89-4c14-8304-a3d765cfc165'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 11:22:19 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:22:27 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:22:27 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'manager1'
2018-09-20 11:22:27 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0003
2018-09-20 11:22:27 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 12
2018-09-20 11:22:27 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'manager1'
2018-09-20 11:22:27 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:22:27 http://192.168.0.31/default.aspx?msg=logged+off guid=0ed5f7e8-5c47-403c-b0d2-b16774f98e6d
2018-09-20 11:22:27 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('0ed5f7e8-5c47-403c-b0d2-b16774f98e6d', 12)
2018-09-20 11:22:27 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 11:22:27 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d'
and us_active = 1
2018-09-20 11:22:27 http://192.168.0.31/bugs.aspx elapsed milliseconds:0008
2018-09-20 11:22:27 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 12
or isnull(qu_org,0) = 5
order by qu_desc
2018-09-20 11:22:27 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:22:27 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 12)
2018-09-20 11:22:27 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 11:22:27 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 12 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 12
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:22:27 http://192.168.0.31/bugs.aspx elapsed milliseconds:0016
2018-09-20 11:22:29 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d'
and us_active = 1
2018-09-20 11:22:29 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:22:29 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 15
2018-09-20 11:22:29 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 12 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 12
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:22:29 http://192.168.0.31/bugs.aspx elapsed milliseconds:0030
2018-09-20 11:22:32 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d'
and us_active = 1
2018-09-20 11:22:32 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:22:32 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 11
2018-09-20 11:22:32 http://192.168.0.31/bugs.aspx sql=
select bg_id ,bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc],
 isnull(pj_name,'') [project], 
isnull(bg_project_custom_dropdown_value1,'') [Version],
 isnull(og_name,'') [organization],
 isnull(ct_name,'') [category], 
rpt.us_username [reported by],
 bg_reported_date [reported on],  
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Programing Completed','QC Completed','Re-Open','Ready to deploy','Hold') then  'In-Process' else st_name end,'')[status],
 bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 12 
 left outer join users rpt on rpt.us_id = bg_reported_user
-- left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 12
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:22:32 http://192.168.0.31/bugs.aspx elapsed milliseconds:0039
2018-09-20 11:22:35 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d'
and us_active = 1
2018-09-20 11:22:35 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:22:35 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 15
2018-09-20 11:22:35 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 12 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 12
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:22:35 http://192.168.0.31/bugs.aspx elapsed milliseconds:0004
2018-09-20 11:22:38 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d'
and us_active = 1
2018-09-20 11:22:38 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:22:38 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 11
2018-09-20 11:22:38 http://192.168.0.31/bugs.aspx sql=
select bg_id ,bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc],
 isnull(pj_name,'') [project], 
isnull(bg_project_custom_dropdown_value1,'') [Version],
 isnull(og_name,'') [organization],
 isnull(ct_name,'') [category], 
rpt.us_username [reported by],
 bg_reported_date [reported on],  
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Programing Completed','QC Completed','Re-Open','Ready to deploy','Hold') then  'In-Process' else st_name end,'')[status],
 bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 12 
 left outer join users rpt on rpt.us_id = bg_reported_user
-- left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 12
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:22:38 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:22:43 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d'
and us_active = 1
2018-09-20 11:22:43 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:22:43 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 15
2018-09-20 11:22:43 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 12 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 12
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:22:43 http://192.168.0.31/bugs.aspx elapsed milliseconds:0003
2018-09-20 11:22:44 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d'
and us_active = 1
2018-09-20 11:22:44 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:22:44 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 2
2018-09-20 11:22:44 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 12 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status <> 5  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 12
					and pu_permission_level = 0))  ) order by bg_id desc
2018-09-20 11:22:44 http://192.168.0.31/bugs.aspx elapsed milliseconds:0013
2018-09-20 11:22:49 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d'
and us_active = 1
2018-09-20 11:22:49 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:22:49 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 15
2018-09-20 11:22:49 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 12 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 12
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:22:49 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 11:22:51 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d'
and us_active = 1
2018-09-20 11:22:51 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:22:51 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 2
2018-09-20 11:22:51 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 12 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status <> 5  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 12
					and pu_permission_level = 0))  ) order by bg_id desc
2018-09-20 11:22:51 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:22:54 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d'
and us_active = 1
2018-09-20 11:22:54 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:22:54 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 15
2018-09-20 11:22:54 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 12 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 12
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:22:54 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:22:56 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d'
and us_active = 1
2018-09-20 11:22:56 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:22:56 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 2
2018-09-20 11:22:56 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 12 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status <> 5  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 12
					and pu_permission_level = 0))  ) order by bg_id desc
2018-09-20 11:22:56 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:22:58 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0ed5f7e8-5c47-403c-b0d2-b16774f98e6d'
and us_active = 1
2018-09-20 11:22:58 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:22:58 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 11
2018-09-20 11:22:58 http://192.168.0.31/bugs.aspx sql=
select bg_id ,bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc],
 isnull(pj_name,'') [project], 
isnull(bg_project_custom_dropdown_value1,'') [Version],
 isnull(og_name,'') [organization],
 isnull(ct_name,'') [category], 
rpt.us_username [reported by],
 bg_reported_date [reported on],  
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Programing Completed','QC Completed','Re-Open','Ready to deploy','Hold') then  'In-Process' else st_name end,'')[status],
 bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 12 
 left outer join users rpt on rpt.us_id = bg_reported_user
-- left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 12
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:22:58 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:23:06 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'0ed5f7e8-5c47-403c-b0d2-b16774f98e6d'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 11:23:06 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:23:09 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:23:09 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'dev1'
2018-09-20 11:23:09 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:23:09 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 2
2018-09-20 11:23:09 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'dev1'
2018-09-20 11:23:09 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:23:09 http://192.168.0.31/default.aspx?msg=logged+off guid=338d1b93-b907-485d-a4d2-03b048ef1ac1
2018-09-20 11:23:09 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('338d1b93-b907-485d-a4d2-03b048ef1ac1', 2)
2018-09-20 11:23:09 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 11:23:09 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '338d1b93-b907-485d-a4d2-03b048ef1ac1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '338d1b93-b907-485d-a4d2-03b048ef1ac1'
and us_active = 1
2018-09-20 11:23:09 http://192.168.0.31/bugs.aspx elapsed milliseconds:0012
2018-09-20 11:23:09 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 2
or isnull(qu_org,0) = 2
order by qu_desc
2018-09-20 11:23:09 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:23:09 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 2)
2018-09-20 11:23:09 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:23:09 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by],bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 2 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status <> 5 and bg_assigned_to_user = 2  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 2
					and pu_permission_level = 0))  ) order by bg_id desc
2018-09-20 11:23:09 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:23:17 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '338d1b93-b907-485d-a4d2-03b048ef1ac1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '338d1b93-b907-485d-a4d2-03b048ef1ac1'
and us_active = 1
2018-09-20 11:23:17 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:23:17 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 12
2018-09-20 11:23:17 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected', 'Ready to deploy','Hold') then  'New' else st_name end,'')[status],
 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 2 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 2
					and pu_permission_level = 0)) order by bg_id desc

2018-09-20 11:23:17 http://192.168.0.31/bugs.aspx elapsed milliseconds:0003
2018-09-20 11:23:20 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '338d1b93-b907-485d-a4d2-03b048ef1ac1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '338d1b93-b907-485d-a4d2-03b048ef1ac1'
and us_active = 1
2018-09-20 11:23:20 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:23:20 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 11
2018-09-20 11:23:20 http://192.168.0.31/bugs.aspx sql=
select bg_id ,bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc],
 isnull(pj_name,'') [project], 
isnull(bg_project_custom_dropdown_value1,'') [Version],
 isnull(og_name,'') [organization],
 isnull(ct_name,'') [category], 
rpt.us_username [reported by],
 bg_reported_date [reported on],  
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Programing Completed','QC Completed','Re-Open','Ready to deploy','Hold') then  'In-Process' else st_name end,'')[status],
 bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 2 
 left outer join users rpt on rpt.us_id = bg_reported_user
-- left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 2
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:23:20 http://192.168.0.31/bugs.aspx elapsed milliseconds:0046
2018-09-20 11:23:24 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '338d1b93-b907-485d-a4d2-03b048ef1ac1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '338d1b93-b907-485d-a4d2-03b048ef1ac1'
and us_active = 1
2018-09-20 11:23:24 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:23:24 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 12
2018-09-20 11:23:24 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected', 'Ready to deploy','Hold') then  'New' else st_name end,'')[status],
 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 2 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 2
					and pu_permission_level = 0)) order by bg_id desc

2018-09-20 11:23:24 http://192.168.0.31/bugs.aspx elapsed milliseconds:0004
2018-09-20 11:23:26 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '338d1b93-b907-485d-a4d2-03b048ef1ac1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '338d1b93-b907-485d-a4d2-03b048ef1ac1'
and us_active = 1
2018-09-20 11:23:26 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:23:26 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 2
2018-09-20 11:23:26 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 2 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status <> 5  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 2
					and pu_permission_level = 0))  ) order by bg_id desc
2018-09-20 11:23:26 http://192.168.0.31/bugs.aspx elapsed milliseconds:0021
2018-09-20 11:23:27 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '338d1b93-b907-485d-a4d2-03b048ef1ac1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '338d1b93-b907-485d-a4d2-03b048ef1ac1'
and us_active = 1
2018-09-20 11:23:27 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:23:27 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 12
2018-09-20 11:23:27 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected', 'Ready to deploy','Hold') then  'New' else st_name end,'')[status],
 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 2 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 2
					and pu_permission_level = 0)) order by bg_id desc

2018-09-20 11:23:27 http://192.168.0.31/bugs.aspx elapsed milliseconds:0004
2018-09-20 11:23:33 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'338d1b93-b907-485d-a4d2-03b048ef1ac1'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 11:23:33 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:23:39 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:23:39 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'support'
2018-09-20 11:23:39 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0003
2018-09-20 11:23:39 http://192.168.0.31/default.aspx?msg=logged+off Unknown user support attempted to login.
2018-09-20 11:23:44 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:23:44 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'support1'
2018-09-20 11:23:44 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0001
2018-09-20 11:23:44 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 4
2018-09-20 11:23:44 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'support1'
2018-09-20 11:23:44 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:23:44 http://192.168.0.31/default.aspx?msg=logged+off guid=2505fcc5-831d-4a77-92d6-8c2c2924c7dd
2018-09-20 11:23:44 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('2505fcc5-831d-4a77-92d6-8c2c2924c7dd', 4)
2018-09-20 11:23:44 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 11:23:44 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2505fcc5-831d-4a77-92d6-8c2c2924c7dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2505fcc5-831d-4a77-92d6-8c2c2924c7dd'
and us_active = 1
2018-09-20 11:23:44 http://192.168.0.31/bugs.aspx elapsed milliseconds:0005
2018-09-20 11:23:44 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 4
or isnull(qu_org,0) = 4
order by qu_desc
2018-09-20 11:23:44 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:23:44 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 4)
2018-09-20 11:23:44 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:23:44 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 4 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 4
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:23:44 http://192.168.0.31/bugs.aspx elapsed milliseconds:0011
2018-09-20 11:23:51 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2505fcc5-831d-4a77-92d6-8c2c2924c7dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2505fcc5-831d-4a77-92d6-8c2c2924c7dd'
and us_active = 1
2018-09-20 11:23:51 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:23:51 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 14
2018-09-20 11:23:51 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 4 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 4
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:23:51 http://192.168.0.31/bugs.aspx elapsed milliseconds:0030
2018-09-20 11:23:54 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2505fcc5-831d-4a77-92d6-8c2c2924c7dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2505fcc5-831d-4a77-92d6-8c2c2924c7dd'
and us_active = 1
2018-09-20 11:23:54 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:23:54 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 2
2018-09-20 11:23:54 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 4 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status <> 5  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 4
					and pu_permission_level = 0))  ) order by bg_id desc
2018-09-20 11:23:54 http://192.168.0.31/bugs.aspx elapsed milliseconds:0032
2018-09-20 11:23:55 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2505fcc5-831d-4a77-92d6-8c2c2924c7dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2505fcc5-831d-4a77-92d6-8c2c2924c7dd'
and us_active = 1
2018-09-20 11:23:55 http://192.168.0.31/bugs.aspx elapsed milliseconds:0025
2018-09-20 11:23:55 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 11
2018-09-20 11:23:55 http://192.168.0.31/bugs.aspx sql=
select bg_id ,bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc],
 isnull(pj_name,'') [project], 
isnull(bg_project_custom_dropdown_value1,'') [Version],
 isnull(og_name,'') [organization],
 isnull(ct_name,'') [category], 
rpt.us_username [reported by],
 bg_reported_date [reported on],  
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Programing Completed','QC Completed','Re-Open','Ready to deploy','Hold') then  'In-Process' else st_name end,'')[status],
 bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 4 
 left outer join users rpt on rpt.us_id = bg_reported_user
-- left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 4
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:23:55 http://192.168.0.31/bugs.aspx elapsed milliseconds:0029
2018-09-20 11:23:58 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2505fcc5-831d-4a77-92d6-8c2c2924c7dd';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2505fcc5-831d-4a77-92d6-8c2c2924c7dd'
and us_active = 1
2018-09-20 11:23:58 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:23:58 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 14
2018-09-20 11:23:58 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 4 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 4
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:23:58 http://192.168.0.31/bugs.aspx elapsed milliseconds:0004
2018-09-20 11:24:03 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'2505fcc5-831d-4a77-92d6-8c2c2924c7dd'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 11:24:03 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:24:07 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:24:07 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-09-20 11:24:07 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:24:07 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-09-20 11:24:07 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'admin'
2018-09-20 11:24:07 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:24:07 http://192.168.0.31/default.aspx?msg=logged+off guid=2a812b98-e5ac-40fa-a37a-e5ee68a58266
2018-09-20 11:24:07 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('2a812b98-e5ac-40fa-a37a-e5ee68a58266', 1)
2018-09-20 11:24:07 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 11:24:07 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:07 http://192.168.0.31/bugs.aspx elapsed milliseconds:0005
2018-09-20 11:24:07 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 11:24:07 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:24:07 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-09-20 11:24:07 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:24:07 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:24:07 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:24:09 http://192.168.0.31/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:09 http://192.168.0.31/admin.aspx elapsed milliseconds:0000
2018-09-20 11:24:09 http://192.168.0.31/admin.aspx sql=
select count(1) from bugs
2018-09-20 11:24:10 http://192.168.0.31/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:10 http://192.168.0.31/users.aspx elapsed milliseconds:0000
2018-09-20 11:24:10 http://192.168.0.31/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:24:10 http://192.168.0.31/users.aspx elapsed milliseconds:0088
2018-09-20 11:24:12 http://192.168.0.31/edit_user.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:12 http://192.168.0.31/edit_user.aspx?id=1 elapsed milliseconds:0000
2018-09-20 11:24:12 http://192.168.0.31/edit_user.aspx?id=1 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 1
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 1
2018-09-20 11:24:12 http://192.168.0.31/edit_user.aspx?id=1 elapsed milliseconds:0022
2018-09-20 11:24:15 http://192.168.0.31/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:15 http://192.168.0.31/users.aspx elapsed milliseconds:0000
2018-09-20 11:24:15 http://192.168.0.31/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:24:15 http://192.168.0.31/users.aspx elapsed milliseconds:0009
2018-09-20 11:24:17 http://192.168.0.31/edit_user.aspx?id=16 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:17 http://192.168.0.31/edit_user.aspx?id=16 elapsed milliseconds:0000
2018-09-20 11:24:17 http://192.168.0.31/edit_user.aspx?id=16 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 16
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 16

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 16
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 16
2018-09-20 11:24:17 http://192.168.0.31/edit_user.aspx?id=16 elapsed milliseconds:0003
2018-09-20 11:24:19 http://192.168.0.31/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:19 http://192.168.0.31/users.aspx elapsed milliseconds:0000
2018-09-20 11:24:19 http://192.168.0.31/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:24:19 http://192.168.0.31/users.aspx elapsed milliseconds:0017
2018-09-20 11:24:20 http://192.168.0.31/edit_user.aspx?id=17 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:20 http://192.168.0.31/edit_user.aspx?id=17 elapsed milliseconds:0000
2018-09-20 11:24:20 http://192.168.0.31/edit_user.aspx?id=17 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 17
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 17

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 17
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 17
2018-09-20 11:24:20 http://192.168.0.31/edit_user.aspx?id=17 elapsed milliseconds:0006
2018-09-20 11:24:21 http://192.168.0.31/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:21 http://192.168.0.31/users.aspx elapsed milliseconds:0000
2018-09-20 11:24:21 http://192.168.0.31/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:24:21 http://192.168.0.31/users.aspx elapsed milliseconds:0010
2018-09-20 11:24:23 http://192.168.0.31/edit_user.aspx?id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:23 http://192.168.0.31/edit_user.aspx?id=11 elapsed milliseconds:0000
2018-09-20 11:24:23 http://192.168.0.31/edit_user.aspx?id=11 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 11
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 11

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 11
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 11
2018-09-20 11:24:23 http://192.168.0.31/edit_user.aspx?id=11 elapsed milliseconds:0006
2018-09-20 11:24:25 http://192.168.0.31/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:25 http://192.168.0.31/users.aspx elapsed milliseconds:0000
2018-09-20 11:24:25 http://192.168.0.31/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:24:25 http://192.168.0.31/users.aspx elapsed milliseconds:0010
2018-09-20 11:24:26 http://192.168.0.31/edit_user.aspx?id=15 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:26 http://192.168.0.31/edit_user.aspx?id=15 elapsed milliseconds:0000
2018-09-20 11:24:26 http://192.168.0.31/edit_user.aspx?id=15 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 15
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 15

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 15
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 15
2018-09-20 11:24:26 http://192.168.0.31/edit_user.aspx?id=15 elapsed milliseconds:0006
2018-09-20 11:24:30 http://192.168.0.31/edit_user.aspx?id=15 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:30 http://192.168.0.31/edit_user.aspx?id=15 elapsed milliseconds:0000
2018-09-20 11:24:30 http://192.168.0.31/edit_user.aspx?id=15 sql=
select count(1)
				from users where us_username = N'dep1' and us_id <> 15
2018-09-20 11:24:30 http://192.168.0.31/edit_user.aspx?id=15 sql=

update users set
us_username = N'dep1',
us_firstname = N'deployer',
us_lastname = N'1',
us_bugs_per_page = N'10',
us_use_fckeditor = 0,
us_enable_bug_list_popups = 1,
us_email = N'',
us_active = 1,
us_admin = 0,
us_enable_notifications = 1,
us_send_notifications_to_self = 0,
us_reported_notifications = 4,
us_assigned_notifications = 4,
us_subscribed_notifications = 4,
us_auto_subscribe = 0,
us_auto_subscribe_own_bugs = 1,
us_auto_subscribe_reported_bugs = 1,
us_default_query = 13,
us_org = 6,
us_signature = N'',
us_forced_project = 0
where us_id = 15
2018-09-20 11:24:30 http://192.168.0.31/edit_user.aspx?id=15 sql=

		update project_user_xref
		set pu_auto_subscribe = 0,
		pu_admin = 0,
		pu_permission_level = 2
		where pu_user = 15;
			update project_user_xref
			set pu_permission_level = 2
			where pu_user = 15
			and pu_project in (7,6,5,4,3,2);
2018-09-20 11:24:30 http://192.168.0.31/edit_user.aspx?id=15 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:30 http://192.168.0.31/edit_user.aspx?id=15 elapsed milliseconds:0000
2018-09-20 11:24:30 http://192.168.0.31/edit_user.aspx?id=15 sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:24:30 http://192.168.0.31/edit_user.aspx?id=15 elapsed milliseconds:0009
2018-09-20 11:24:31 http://192.168.0.31/edit_user.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:31 http://192.168.0.31/edit_user.aspx elapsed milliseconds:0000
2018-09-20 11:24:31 http://192.168.0.31/edit_user.aspx sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 0
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 0

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 0
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
2018-09-20 11:24:31 http://192.168.0.31/edit_user.aspx elapsed milliseconds:0005
2018-09-20 11:24:35 http://192.168.0.31/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:35 http://192.168.0.31/admin.aspx elapsed milliseconds:0000
2018-09-20 11:24:35 http://192.168.0.31/admin.aspx sql=
select count(1) from bugs
2018-09-20 11:24:37 http://192.168.0.31/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:37 http://192.168.0.31/users.aspx elapsed milliseconds:0000
2018-09-20 11:24:37 http://192.168.0.31/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:24:37 http://192.168.0.31/users.aspx elapsed milliseconds:0011
2018-09-20 11:24:44 http://192.168.0.31/edit_user.aspx?id=2 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:44 http://192.168.0.31/edit_user.aspx?id=2 elapsed milliseconds:0000
2018-09-20 11:24:44 http://192.168.0.31/edit_user.aspx?id=2 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 2
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 2

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 2
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 2
2018-09-20 11:24:44 http://192.168.0.31/edit_user.aspx?id=2 elapsed milliseconds:0004
2018-09-20 11:24:50 http://192.168.0.31/edit_user.aspx?id=2 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:50 http://192.168.0.31/edit_user.aspx?id=2 elapsed milliseconds:0000
2018-09-20 11:24:50 http://192.168.0.31/edit_user.aspx?id=2 sql=
select count(1)
				from users where us_username = N'dev1' and us_id <> 2
2018-09-20 11:24:50 http://192.168.0.31/edit_user.aspx?id=2 sql=

update users set
us_username = N'dev1',
us_firstname = N'developer',
us_lastname = N'1',
us_bugs_per_page = N'10',
us_use_fckeditor = 0,
us_enable_bug_list_popups = 1,
us_email = N'',
us_active = 1,
us_admin = 0,
us_enable_notifications = 1,
us_send_notifications_to_self = 0,
us_reported_notifications = 4,
us_assigned_notifications = 4,
us_subscribed_notifications = 4,
us_auto_subscribe = 0,
us_auto_subscribe_own_bugs = 0,
us_auto_subscribe_reported_bugs = 0,
us_default_query = 12,
us_org = 2,
us_signature = N'',
us_forced_project = 0
where us_id = 2
2018-09-20 11:24:50 http://192.168.0.31/edit_user.aspx?id=2 sql=

		update project_user_xref
		set pu_auto_subscribe = 0,
		pu_admin = 0,
		pu_permission_level = 2
		where pu_user = 2;
			update project_user_xref
			set pu_permission_level = 2
			where pu_user = 2
			and pu_project in (7,6,5,4,3,2);
2018-09-20 11:24:50 http://192.168.0.31/edit_user.aspx?id=2 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:50 http://192.168.0.31/edit_user.aspx?id=2 elapsed milliseconds:0000
2018-09-20 11:24:50 http://192.168.0.31/edit_user.aspx?id=2 sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:24:50 http://192.168.0.31/edit_user.aspx?id=2 elapsed milliseconds:0009
2018-09-20 11:24:53 http://192.168.0.31/edit_user.aspx?id=2 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:53 http://192.168.0.31/edit_user.aspx?id=2 elapsed milliseconds:0000
2018-09-20 11:24:53 http://192.168.0.31/edit_user.aspx?id=2 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 2
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 2

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 2
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 2
2018-09-20 11:24:53 http://192.168.0.31/edit_user.aspx?id=2 elapsed milliseconds:0000
2018-09-20 11:24:55 http://192.168.0.31/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:55 http://192.168.0.31/users.aspx elapsed milliseconds:0000
2018-09-20 11:24:55 http://192.168.0.31/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:24:55 http://192.168.0.31/users.aspx elapsed milliseconds:0009
2018-09-20 11:24:57 http://192.168.0.31/edit_user.aspx?id=13 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:24:57 http://192.168.0.31/edit_user.aspx?id=13 elapsed milliseconds:0000
2018-09-20 11:24:57 http://192.168.0.31/edit_user.aspx?id=13 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 13
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 13

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 13
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 13
2018-09-20 11:24:57 http://192.168.0.31/edit_user.aspx?id=13 elapsed milliseconds:0004
2018-09-20 11:25:06 http://192.168.0.31/edit_user.aspx?id=13 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:06 http://192.168.0.31/edit_user.aspx?id=13 elapsed milliseconds:0000
2018-09-20 11:25:06 http://192.168.0.31/edit_user.aspx?id=13 sql=
select count(1)
				from users where us_username = N'dev2' and us_id <> 13
2018-09-20 11:25:06 http://192.168.0.31/edit_user.aspx?id=13 sql=

update users set
us_username = N'dev2',
us_firstname = N'developer',
us_lastname = N'2',
us_bugs_per_page = N'10',
us_use_fckeditor = 0,
us_enable_bug_list_popups = 1,
us_email = N'',
us_active = 1,
us_admin = 0,
us_enable_notifications = 1,
us_send_notifications_to_self = 0,
us_reported_notifications = 4,
us_assigned_notifications = 4,
us_subscribed_notifications = 4,
us_auto_subscribe = 0,
us_auto_subscribe_own_bugs = 1,
us_auto_subscribe_reported_bugs = 1,
us_default_query = 12,
us_org = 2,
us_signature = N'',
us_forced_project = 0
where us_id = 13
2018-09-20 11:25:06 http://192.168.0.31/edit_user.aspx?id=13 sql=

		update project_user_xref
		set pu_auto_subscribe = 0,
		pu_admin = 0,
		pu_permission_level = 2
		where pu_user = 13;
			update project_user_xref
			set pu_permission_level = 2
			where pu_user = 13
			and pu_project in (7,6,5,4,3,2);
2018-09-20 11:25:06 http://192.168.0.31/edit_user.aspx?id=13 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:06 http://192.168.0.31/edit_user.aspx?id=13 elapsed milliseconds:0000
2018-09-20 11:25:06 http://192.168.0.31/edit_user.aspx?id=13 sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:25:06 http://192.168.0.31/edit_user.aspx?id=13 elapsed milliseconds:0008
2018-09-20 11:25:09 http://192.168.0.31/edit_user.aspx?id=14 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:09 http://192.168.0.31/edit_user.aspx?id=14 elapsed milliseconds:0000
2018-09-20 11:25:09 http://192.168.0.31/edit_user.aspx?id=14 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 14
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 14

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 14
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 14
2018-09-20 11:25:09 http://192.168.0.31/edit_user.aspx?id=14 elapsed milliseconds:0003
2018-09-20 11:25:11 http://192.168.0.31/edit_user.aspx?id=14 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:11 http://192.168.0.31/edit_user.aspx?id=14 elapsed milliseconds:0000
2018-09-20 11:25:11 http://192.168.0.31/edit_user.aspx?id=14 sql=
select count(1)
				from users where us_username = N'dev3' and us_id <> 14
2018-09-20 11:25:11 http://192.168.0.31/edit_user.aspx?id=14 sql=

update users set
us_username = N'dev3',
us_firstname = N'developer',
us_lastname = N'3',
us_bugs_per_page = N'10',
us_use_fckeditor = 0,
us_enable_bug_list_popups = 1,
us_email = N'',
us_active = 1,
us_admin = 0,
us_enable_notifications = 1,
us_send_notifications_to_self = 0,
us_reported_notifications = 4,
us_assigned_notifications = 4,
us_subscribed_notifications = 4,
us_auto_subscribe = 0,
us_auto_subscribe_own_bugs = 1,
us_auto_subscribe_reported_bugs = 1,
us_default_query = 12,
us_org = 2,
us_signature = N'',
us_forced_project = 0
where us_id = 14
2018-09-20 11:25:11 http://192.168.0.31/edit_user.aspx?id=14 sql=

		update project_user_xref
		set pu_auto_subscribe = 0,
		pu_admin = 0,
		pu_permission_level = 2
		where pu_user = 14;
			update project_user_xref
			set pu_permission_level = 2
			where pu_user = 14
			and pu_project in (7,6,5,4,3,2);
2018-09-20 11:25:11 http://192.168.0.31/edit_user.aspx?id=14 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:11 http://192.168.0.31/edit_user.aspx?id=14 elapsed milliseconds:0000
2018-09-20 11:25:11 http://192.168.0.31/edit_user.aspx?id=14 sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:25:11 http://192.168.0.31/edit_user.aspx?id=14 elapsed milliseconds:0008
2018-09-20 11:25:14 http://192.168.0.31/edit_user.aspx?id=6 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:14 http://192.168.0.31/edit_user.aspx?id=6 elapsed milliseconds:0000
2018-09-20 11:25:14 http://192.168.0.31/edit_user.aspx?id=6 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 6
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 6

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 6
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 6
2018-09-20 11:25:14 http://192.168.0.31/edit_user.aspx?id=6 elapsed milliseconds:0004
2018-09-20 11:25:16 http://192.168.0.31/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:16 http://192.168.0.31/users.aspx elapsed milliseconds:0000
2018-09-20 11:25:16 http://192.168.0.31/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:25:16 http://192.168.0.31/users.aspx elapsed milliseconds:0009
2018-09-20 11:25:19 http://192.168.0.31/edit_user.aspx?id=5 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:19 http://192.168.0.31/edit_user.aspx?id=5 elapsed milliseconds:0000
2018-09-20 11:25:19 http://192.168.0.31/edit_user.aspx?id=5 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 5
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 5

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 5
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 5
2018-09-20 11:25:19 http://192.168.0.31/edit_user.aspx?id=5 elapsed milliseconds:0004
2018-09-20 11:25:23 http://192.168.0.31/users.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:23 http://192.168.0.31/users.aspx elapsed milliseconds:0000
2018-09-20 11:25:23 http://192.168.0.31/users.aspx sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:25:23 http://192.168.0.31/users.aspx elapsed milliseconds:0011
2018-09-20 11:25:24 http://192.168.0.31/edit_user.aspx?id=12 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:24 http://192.168.0.31/edit_user.aspx?id=12 elapsed milliseconds:0000
2018-09-20 11:25:24 http://192.168.0.31/edit_user.aspx?id=12 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 12
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 12

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 12
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 12
2018-09-20 11:25:24 http://192.168.0.31/edit_user.aspx?id=12 elapsed milliseconds:0005
2018-09-20 11:25:28 http://192.168.0.31/edit_user.aspx?id=12 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:28 http://192.168.0.31/edit_user.aspx?id=12 elapsed milliseconds:0000
2018-09-20 11:25:28 http://192.168.0.31/edit_user.aspx?id=12 sql=
select count(1)
				from users where us_username = N'manager1' and us_id <> 12
2018-09-20 11:25:28 http://192.168.0.31/edit_user.aspx?id=12 sql=

update users set
us_username = N'manager1',
us_firstname = N'TDSS',
us_lastname = N'Manager',
us_bugs_per_page = N'10',
us_use_fckeditor = 0,
us_enable_bug_list_popups = 1,
us_email = N'',
us_active = 1,
us_admin = 1,
us_enable_notifications = 1,
us_send_notifications_to_self = 0,
us_reported_notifications = 4,
us_assigned_notifications = 4,
us_subscribed_notifications = 4,
us_auto_subscribe = 0,
us_auto_subscribe_own_bugs = 1,
us_auto_subscribe_reported_bugs = 1,
us_default_query = 15,
us_org = 5,
us_signature = N'',
us_forced_project = 0
where us_id = 12
2018-09-20 11:25:28 http://192.168.0.31/edit_user.aspx?id=12 sql=

		update project_user_xref
		set pu_auto_subscribe = 0,
		pu_admin = 0,
		pu_permission_level = 2
		where pu_user = 12;
			update project_user_xref
			set pu_permission_level = 2
			where pu_user = 12
			and pu_project in (7,6,5,4,3,2);
2018-09-20 11:25:28 http://192.168.0.31/edit_user.aspx?id=12 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:28 http://192.168.0.31/edit_user.aspx?id=12 elapsed milliseconds:0000
2018-09-20 11:25:28 http://192.168.0.31/edit_user.aspx?id=12 sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:25:28 http://192.168.0.31/edit_user.aspx?id=12 elapsed milliseconds:0009
2018-09-20 11:25:31 http://192.168.0.31/edit_user.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:31 http://192.168.0.31/edit_user.aspx?id=3 elapsed milliseconds:0000
2018-09-20 11:25:31 http://192.168.0.31/edit_user.aspx?id=3 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 3
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 3

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 3
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 3
2018-09-20 11:25:31 http://192.168.0.31/edit_user.aspx?id=3 elapsed milliseconds:0006
2018-09-20 11:25:32 http://192.168.0.31/edit_user.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:32 http://192.168.0.31/edit_user.aspx?id=3 elapsed milliseconds:0000
2018-09-20 11:25:32 http://192.168.0.31/edit_user.aspx?id=3 sql=
select count(1)
				from users where us_username = N'qc1' and us_id <> 3
2018-09-20 11:25:32 http://192.168.0.31/edit_user.aspx?id=3 sql=

update users set
us_username = N'qc1',
us_firstname = N'TDSS',
us_lastname = N'QC',
us_bugs_per_page = N'10',
us_use_fckeditor = 0,
us_enable_bug_list_popups = 1,
us_email = N'',
us_active = 1,
us_admin = 0,
us_enable_notifications = 1,
us_send_notifications_to_self = 0,
us_reported_notifications = 4,
us_assigned_notifications = 4,
us_subscribed_notifications = 4,
us_auto_subscribe = 0,
us_auto_subscribe_own_bugs = 0,
us_auto_subscribe_reported_bugs = 0,
us_default_query = 4,
us_org = 7,
us_signature = N'',
us_forced_project = 0
where us_id = 3
2018-09-20 11:25:32 http://192.168.0.31/edit_user.aspx?id=3 sql=

		update project_user_xref
		set pu_auto_subscribe = 0,
		pu_admin = 0,
		pu_permission_level = 2
		where pu_user = 3;
			update project_user_xref
			set pu_permission_level = 2
			where pu_user = 3
			and pu_project in (7,6,5,4,3,2);
2018-09-20 11:25:32 http://192.168.0.31/edit_user.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:32 http://192.168.0.31/edit_user.aspx?id=3 elapsed milliseconds:0000
2018-09-20 11:25:32 http://192.168.0.31/edit_user.aspx?id=3 sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:25:32 http://192.168.0.31/edit_user.aspx?id=3 elapsed milliseconds:0009
2018-09-20 11:25:35 http://192.168.0.31/edit_user.aspx?id=4 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:35 http://192.168.0.31/edit_user.aspx?id=4 elapsed milliseconds:0000
2018-09-20 11:25:35 http://192.168.0.31/edit_user.aspx?id=4 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 4
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 4

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 4
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 4
2018-09-20 11:25:35 http://192.168.0.31/edit_user.aspx?id=4 elapsed milliseconds:0006
2018-09-20 11:25:37 http://192.168.0.31/edit_user.aspx?id=4 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:37 http://192.168.0.31/edit_user.aspx?id=4 elapsed milliseconds:0000
2018-09-20 11:25:37 http://192.168.0.31/edit_user.aspx?id=4 sql=
select count(1)
				from users where us_username = N'support1' and us_id <> 4
2018-09-20 11:25:37 http://192.168.0.31/edit_user.aspx?id=4 sql=

update users set
us_username = N'support1',
us_firstname = N'TDSS',
us_lastname = N'Support',
us_bugs_per_page = N'10',
us_use_fckeditor = 0,
us_enable_bug_list_popups = 1,
us_email = N'',
us_active = 1,
us_admin = 1,
us_enable_notifications = 1,
us_send_notifications_to_self = 0,
us_reported_notifications = 4,
us_assigned_notifications = 4,
us_subscribed_notifications = 4,
us_auto_subscribe = 0,
us_auto_subscribe_own_bugs = 0,
us_auto_subscribe_reported_bugs = 0,
us_default_query = 14,
us_org = 4,
us_signature = N'',
us_forced_project = 0
where us_id = 4
2018-09-20 11:25:37 http://192.168.0.31/edit_user.aspx?id=4 sql=

		update project_user_xref
		set pu_auto_subscribe = 0,
		pu_admin = 0,
		pu_permission_level = 2
		where pu_user = 4;
			update project_user_xref
			set pu_permission_level = 2
			where pu_user = 4
			and pu_project in (7,6,5,4,3,2);
2018-09-20 11:25:37 http://192.168.0.31/edit_user.aspx?id=4 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:37 http://192.168.0.31/edit_user.aspx?id=4 elapsed milliseconds:0000
2018-09-20 11:25:37 http://192.168.0.31/edit_user.aspx?id=4 sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:25:37 http://192.168.0.31/edit_user.aspx?id=4 elapsed milliseconds:0009
2018-09-20 11:25:40 http://192.168.0.31/edit_user.aspx?id=10 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:40 http://192.168.0.31/edit_user.aspx?id=10 elapsed milliseconds:0000
2018-09-20 11:25:40 http://192.168.0.31/edit_user.aspx?id=10 sql=

				select pj_id, pj_name,
				isnull(pu_permission_level,2) [pu_permission_level],
				isnull(pu_auto_subscribe,0) [pu_auto_subscribe],
				isnull(pu_admin,0) [pu_admin]
				from projects
				left outer join project_user_xref on pj_id = pu_project
				and pu_user = 10
				order by pj_name;/* populate query dropdown */
		    declare @org int
		    set @org = null
		    select @org = us_org from users where us_id = 10

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 10
			or isnull(qu_org,0) = isnull(@org,-1)
			order by qu_desc;/* populate org dropdown 1 */
				select og_id, og_name
				from orgs
				order by og_name;
			select
				us_username,
				isnull(us_firstname,'') [us_firstname],
				isnull(us_lastname,'') [us_lastname],
				isnull(us_bugs_per_page,10) [us_bugs_per_page],
				us_use_fckeditor,
				us_enable_bug_list_popups,
				isnull(us_email,'') [us_email],
				us_active,
				us_admin,
				us_enable_notifications,
				us_send_notifications_to_self,
                us_reported_notifications,
                us_assigned_notifications,
                us_subscribed_notifications,
				us_auto_subscribe,
				us_auto_subscribe_own_bugs,
				us_auto_subscribe_reported_bugs,
				us_default_query,
				us_org,
				isnull(us_signature,'') [us_signature],
				isnull(us_forced_project,0) [us_forced_project],
				us_created_user
				from users
				where us_id = 10
2018-09-20 11:25:40 http://192.168.0.31/edit_user.aspx?id=10 elapsed milliseconds:0005
2018-09-20 11:25:41 http://192.168.0.31/edit_user.aspx?id=10 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:41 http://192.168.0.31/edit_user.aspx?id=10 elapsed milliseconds:0000
2018-09-20 11:25:41 http://192.168.0.31/edit_user.aspx?id=10 sql=
select count(1)
				from users where us_username = N'yaleuser1' and us_id <> 10
2018-09-20 11:25:41 http://192.168.0.31/edit_user.aspx?id=10 sql=

update users set
us_username = N'yaleuser1',
us_firstname = N'Yale',
us_lastname = N'user1',
us_bugs_per_page = N'10',
us_use_fckeditor = 0,
us_enable_bug_list_popups = 1,
us_email = N'',
us_active = 1,
us_admin = 0,
us_enable_notifications = 1,
us_send_notifications_to_self = 0,
us_reported_notifications = 4,
us_assigned_notifications = 4,
us_subscribed_notifications = 4,
us_auto_subscribe = 0,
us_auto_subscribe_own_bugs = 0,
us_auto_subscribe_reported_bugs = 0,
us_default_query = 11,
us_org = 8,
us_signature = N'',
us_forced_project = 0
where us_id = 10
2018-09-20 11:25:41 http://192.168.0.31/edit_user.aspx?id=10 sql=

		update project_user_xref
		set pu_auto_subscribe = 0,
		pu_admin = 0,
		pu_permission_level = 2
		where pu_user = 10;
			update project_user_xref
			set pu_permission_level = 2
			where pu_user = 10
			and pu_project in (7,6,5,4,3,2);
2018-09-20 11:25:41 http://192.168.0.31/edit_user.aspx?id=10 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:41 http://192.168.0.31/edit_user.aspx?id=10 elapsed milliseconds:0000
2018-09-20 11:25:41 http://192.168.0.31/edit_user.aspx?id=10 sql=

			select distinct pu_user
			into #t
			from
			project_user_xref
			where pu_admin = 1;

			select u.us_id [id],
			'<a href=edit_user.aspx?id=' + convert(varchar,u.us_id) + '>edit</a>' [$no_sort_edit],
			'<a href=edit_user.aspx?copy=y&id=' + convert(varchar,u.us_id) + '>copy</a>' [$no_sort_add<br>like<br>this],
			'<a href=delete_user.aspx?id=' + convert(varchar,u.us_id) + '>delete</a>' [$no_sort_delete],

			u.us_username [username],
			isnull(u.us_firstname,'') + ' ' + isnull(u.us_lastname,'') [name],
			'<a sort=''' + og_name + ''' href=edit_org.aspx?id=' + convert(varchar,og_id) + '>' + og_name + '</a>' [org],
            isnull(u.us_email,'') [email],
			case when u.us_admin = 1 then 'Y' else 'N' end [admin],
			case when pu_user is null then 'N' else 'Y' end [project<br>admin],
			case when u.us_active = 1 then 'Y' else 'N' end [active],
			case when og_external_user = 1 then 'Y' else 'N' end [external],
			isnull(pj_name,'') [forced<br>project],
			isnull(qu_desc,'') [default query],
			case when u.us_enable_notifications = 1 then 'Y' else 'N' end [notif-<br>ications],
			u.us_most_recent_login_datetime [most recent login],
			u2.us_username [created<br>by]

			from users u
			inner join orgs on u.us_org = og_id
			left outer join queries on u.us_default_query = qu_id
			left outer join projects on u.us_forced_project = pj_id
			left outer join users u2 on u.us_created_user = u2.us_id
			left outer join #t on u.us_id = pu_user
			where u.us_active in (1 ,0)
			
			order by u.us_username;

			drop table #t
2018-09-20 11:25:41 http://192.168.0.31/edit_user.aspx?id=10 elapsed milliseconds:0009
2018-09-20 11:25:47 http://192.168.0.31/admin.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:47 http://192.168.0.31/admin.aspx elapsed milliseconds:0000
2018-09-20 11:25:47 http://192.168.0.31/admin.aspx sql=
select count(1) from bugs
2018-09-20 11:25:50 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:25:50 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:25:50 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:25:50 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:28:30 http://192.168.0.31/edit_query.aspx?id=13 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:28:30 http://192.168.0.31/edit_query.aspx?id=13 elapsed milliseconds:0000
2018-09-20 11:28:30 http://192.168.0.31/edit_query.aspx?id=13 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:28:30 http://192.168.0.31/edit_query.aspx?id=13 elapsed milliseconds:0000
2018-09-20 11:28:30 http://192.168.0.31/edit_query.aspx?id=13 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 13
2018-09-20 11:28:30 http://192.168.0.31/edit_query.aspx?id=13 elapsed milliseconds:0000
2018-09-20 11:29:03 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:29:03 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:29:03 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:29:03 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:29:14 http://192.168.0.31/edit_query.aspx?id=4 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:29:14 http://192.168.0.31/edit_query.aspx?id=4 elapsed milliseconds:0000
2018-09-20 11:29:14 http://192.168.0.31/edit_query.aspx?id=4 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:29:14 http://192.168.0.31/edit_query.aspx?id=4 elapsed milliseconds:0000
2018-09-20 11:29:14 http://192.168.0.31/edit_query.aspx?id=4 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 4
2018-09-20 11:29:14 http://192.168.0.31/edit_query.aspx?id=4 elapsed milliseconds:0000
2018-09-20 11:29:38 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:29:38 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:29:38 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:29:38 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:40:07 http://192.168.0.31/edit_query.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:40:07 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0000
2018-09-20 11:40:07 http://192.168.0.31/edit_query.aspx sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:40:07 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0000
2018-09-20 11:41:10 http://192.168.0.31/edit_query.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:41:10 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0000
2018-09-20 11:41:10 http://192.168.0.31/edit_query.aspx sql=
select count(1) from queries where qu_desc = N'Developer view'
2018-09-20 11:41:10 http://192.168.0.31/edit_query.aspx sql=
insert into queries
				(qu_desc, qu_sql, qu_default, qu_user, qu_org)
				values (N'Developer view', N'select isnull(pr_background_color,''#ffffff''), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'''') [project], isnull(bg_project_custom_dropdown_value1,'''') [Version], isnull(og_name,'''') [organization], isnull(ct_name,'''') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'''') [priority], isnull(asg.us_username,'''') [assigned to], 
 --isnull(st_name,'''') [status], 
 isnull(case when st_name IN(''Waiting for approval'',''Approved'',''Rejected'', ''Ready to deploy'',''Hold'') then ''New'' else st_name end,'''')[status], 
 isnull(lu.us_username,'''') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = $ME 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
 order by bg_id desc ', 0, 0, 1)
2018-09-20 11:41:10 http://192.168.0.31/edit_query.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:41:10 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0000
2018-09-20 11:41:10 http://192.168.0.31/edit_query.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:41:10 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0001
2018-09-20 11:41:14 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:41:14 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:41:14 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 11:41:14 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:41:14 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-09-20 11:41:14 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:41:14 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:41:17 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:41:17 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:41:17 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 16
2018-09-20 11:41:17 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 --isnull(st_name,'') [status], 
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected', 'Ready to deploy','Hold') then 'New' else st_name end,'')[status], 
 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc 
2018-09-20 11:41:17 http://192.168.0.31/bugs.aspx elapsed milliseconds:0012
2018-09-20 11:41:22 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:41:22 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:41:22 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:41:22 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:41:23 http://192.168.0.31/edit_query.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:41:23 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0000
2018-09-20 11:41:23 http://192.168.0.31/edit_query.aspx sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:41:23 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0000
2018-09-20 11:41:42 http://192.168.0.31/edit_query.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:41:42 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0000
2018-09-20 11:41:42 http://192.168.0.31/edit_query.aspx sql=
select count(1) from queries where qu_desc = N'QC view'
2018-09-20 11:41:42 http://192.168.0.31/edit_query.aspx sql=
insert into queries
				(qu_desc, qu_sql, qu_default, qu_user, qu_org)
				values (N'QC view', N'select isnull(pr_background_color,''#ffffff''), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'''') [project], isnull(og_name,'''') [organization], isnull(ct_name,'''') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'''') [priority], isnull(asg.us_username,'''') [assigned to],
--isnull(st_name,'''') [status],
 isnull(case when st_name IN(''Waiting for approval'',''Approved'',''Rejected'',''Open'',''In-Process'',''Ready to deploy'',''Hold'') then  ''New'' else st_name end,'''')[status],

 isnull(lu.us_username,'''') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = $ME 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where bg_status = 3 order by bg_id desc', 0, 0, 0)
2018-09-20 11:41:42 http://192.168.0.31/edit_query.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:41:42 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0000
2018-09-20 11:41:42 http://192.168.0.31/edit_query.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:41:42 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0001
2018-09-20 11:41:43 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:41:43 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:41:43 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 11:41:43 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:41:43 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 16
2018-09-20 11:41:43 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 --isnull(st_name,'') [status], 
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected', 'Ready to deploy','Hold') then 'New' else st_name end,'')[status], 
 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc 
2018-09-20 11:41:43 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:41:46 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:41:46 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:41:46 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 17
2018-09-20 11:41:46 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
--isnull(st_name,'') [status],
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected','Open','In-Process','Ready to deploy','Hold') then  'New' else st_name end,'')[status],

 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status = 3  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2018-09-20 11:41:46 http://192.168.0.31/bugs.aspx elapsed milliseconds:0010
2018-09-20 11:41:56 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:41:56 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:41:56 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:41:56 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:41:57 http://192.168.0.31/edit_query.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:41:57 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0000
2018-09-20 11:41:57 http://192.168.0.31/edit_query.aspx sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:41:57 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0000
2018-09-20 11:42:18 http://192.168.0.31/edit_query.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:42:18 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0000
2018-09-20 11:42:18 http://192.168.0.31/edit_query.aspx sql=
select count(1) from queries where qu_desc = N'Deployment view'
2018-09-20 11:42:18 http://192.168.0.31/edit_query.aspx sql=
insert into queries
				(qu_desc, qu_sql, qu_default, qu_user, qu_org)
				values (N'Deployment view', N'select isnull(pr_background_color,''#ffffff''), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'''') [project], isnull(bg_project_custom_dropdown_value1,'''') [Version], isnull(og_name,'''') [organization], isnull(ct_name,'''') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'''') [priority], isnull(asg.us_username,'''') [assigned to], 
 --isnull(st_name,'''') [status],
 isnull(case when st_name IN(''Waiting for approval'',''Approved'',''Rejected'',''open'',''In-process'',''Programming Completed'',''QC Completed'',''Re-Open'',''Hold'') then  ''New'' else st_name end,'''')[status],
 isnull(lu.us_username,'''') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = $ME 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
 order by bg_id desc', 0, 0, 1)
2018-09-20 11:42:18 http://192.168.0.31/edit_query.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:42:18 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0000
2018-09-20 11:42:18 http://192.168.0.31/edit_query.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:42:18 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0001
2018-09-20 11:42:21 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:42:21 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:42:21 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 11:42:21 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:42:21 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 17
2018-09-20 11:42:21 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
--isnull(st_name,'') [status],
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected','Open','In-Process','Ready to deploy','Hold') then  'New' else st_name end,'')[status],

 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status = 3  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2018-09-20 11:42:21 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:42:23 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:42:23 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:42:23 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 18
2018-09-20 11:42:23 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected','open','In-process','Programming Completed','QC Completed','Re-Open','Hold') then  'New' else st_name end,'')[status],
 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:42:23 http://192.168.0.31/bugs.aspx elapsed milliseconds:0013
2018-09-20 11:45:19 http://192.168.0.31/ajax.aspx?bugid=35 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:45:19 http://192.168.0.31/ajax.aspx?bugid=35 elapsed milliseconds:0001
2018-09-20 11:45:19 http://192.168.0.31/ajax.aspx?bugid=35 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 35
2018-09-20 11:45:19 http://192.168.0.31/ajax.aspx?bugid=35 elapsed milliseconds:0006
2018-09-20 11:45:19 http://192.168.0.31/ajax.aspx?bugid=35 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 35
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 11:45:19 http://192.168.0.31/ajax.aspx?bugid=35 elapsed milliseconds:0015
2018-09-20 11:45:21 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:45:21 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:45:21 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:45:21 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:53:11 http://192.168.0.31/edit_query.aspx?id=2 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:53:11 http://192.168.0.31/edit_query.aspx?id=2 elapsed milliseconds:0000
2018-09-20 11:53:11 http://192.168.0.31/edit_query.aspx?id=2 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:53:11 http://192.168.0.31/edit_query.aspx?id=2 elapsed milliseconds:0000
2018-09-20 11:53:11 http://192.168.0.31/edit_query.aspx?id=2 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 2
2018-09-20 11:53:11 http://192.168.0.31/edit_query.aspx?id=2 elapsed milliseconds:0000
2018-09-20 11:53:24 http://192.168.0.31/edit_query.aspx?id=2 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:53:24 http://192.168.0.31/edit_query.aspx?id=2 elapsed milliseconds:0000
2018-09-20 11:53:24 http://192.168.0.31/edit_query.aspx?id=2 sql=
select count(1) from queries where qu_desc = N'open bugs' and qu_id <> 2
2018-09-20 11:53:24 http://192.168.0.31/edit_query.aspx?id=2 sql=
update queries set
				qu_desc = N'open bugs',
				qu_sql = N'select isnull(pr_background_color,''#ffffff''), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'''') [project],isnull(bg_project_custom_dropdown_value1,'''') [Version],
  isnull(og_name,'''') [organization], isnull(ct_name,'''') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'''') [priority], isnull(asg.us_username,'''') [assigned to],
 isnull(st_name,'''') [status], isnull(lu.us_username,'''') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = $ME 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where bg_status <> 5 order by bg_id desc',
				qu_user = 0,
				qu_org = 0
				where qu_id = 2
2018-09-20 11:53:24 http://192.168.0.31/edit_query.aspx?id=2 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:53:24 http://192.168.0.31/edit_query.aspx?id=2 elapsed milliseconds:0000
2018-09-20 11:53:24 http://192.168.0.31/edit_query.aspx?id=2 sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:53:24 http://192.168.0.31/edit_query.aspx?id=2 elapsed milliseconds:0001
2018-09-20 11:53:26 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:53:26 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:53:26 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 11:53:26 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:53:26 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 18
2018-09-20 11:53:26 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected','open','In-process','Programming Completed','QC Completed','Re-Open','Hold') then  'New' else st_name end,'')[status],
 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:53:26 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:53:28 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:53:28 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:53:28 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 2
2018-09-20 11:53:28 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project],isnull(bg_project_custom_dropdown_value1,'') [Version],
  isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status <> 5  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2018-09-20 11:53:28 http://192.168.0.31/bugs.aspx elapsed milliseconds:0013
2018-09-20 11:53:31 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:53:31 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:53:31 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 16
2018-09-20 11:53:31 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 --isnull(st_name,'') [status], 
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected', 'Ready to deploy','Hold') then 'New' else st_name end,'')[status], 
 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc 
2018-09-20 11:53:31 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:53:32 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '2a812b98-e5ac-40fa-a37a-e5ee68a58266'
and us_active = 1
2018-09-20 11:53:32 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:53:32 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 2
2018-09-20 11:53:32 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project],isnull(bg_project_custom_dropdown_value1,'') [Version],
  isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status <> 5  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0))  ) order by bg_id desc
2018-09-20 11:53:32 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:53:34 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'2a812b98-e5ac-40fa-a37a-e5ee68a58266'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 11:53:34 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:53:43 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:53:43 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'qc1'
2018-09-20 11:53:43 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:53:43 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 3
2018-09-20 11:53:43 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'qc1'
2018-09-20 11:53:43 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:53:43 http://192.168.0.31/default.aspx?msg=logged+off guid=0933203b-2ecf-44a7-8db3-187e79df7878
2018-09-20 11:53:43 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('0933203b-2ecf-44a7-8db3-187e79df7878', 3)
2018-09-20 11:53:43 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 11:53:43 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0933203b-2ecf-44a7-8db3-187e79df7878';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0933203b-2ecf-44a7-8db3-187e79df7878'
and us_active = 1
2018-09-20 11:53:43 http://192.168.0.31/bugs.aspx elapsed milliseconds:0011
2018-09-20 11:53:43 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 3
or isnull(qu_org,0) = 7
order by qu_desc
2018-09-20 11:53:43 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:53:43 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 3)
2018-09-20 11:53:43 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:53:43 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
--isnull(st_name,'') [status],
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected','Open','In-Process','Ready to deploy','Hold') then  'New' else st_name end,'')[status],

 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 3 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status = 3  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 3
					and pu_permission_level = 0))  ) order by bg_id desc

2018-09-20 11:53:43 http://192.168.0.31/bugs.aspx elapsed milliseconds:0014
2018-09-20 11:53:46 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0933203b-2ecf-44a7-8db3-187e79df7878';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0933203b-2ecf-44a7-8db3-187e79df7878'
and us_active = 1
2018-09-20 11:53:46 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 11:53:46 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 11
2018-09-20 11:53:46 http://192.168.0.31/bugs.aspx sql=
select bg_id ,bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc],
 isnull(pj_name,'') [project], 
isnull(bg_project_custom_dropdown_value1,'') [Version],
 isnull(og_name,'') [organization],
 isnull(ct_name,'') [category], 
rpt.us_username [reported by],
 bg_reported_date [reported on],  
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Programing Completed','QC Completed','Re-Open','Ready to deploy','Hold') then  'In-Process' else st_name end,'')[status],
 bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 3 
 left outer join users rpt on rpt.us_id = bg_reported_user
-- left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 3
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:53:46 http://192.168.0.31/bugs.aspx elapsed milliseconds:0030
2018-09-20 11:53:48 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0933203b-2ecf-44a7-8db3-187e79df7878';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0933203b-2ecf-44a7-8db3-187e79df7878'
and us_active = 1
2018-09-20 11:53:48 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:53:48 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 2
2018-09-20 11:53:48 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project],isnull(bg_project_custom_dropdown_value1,'') [Version],
  isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 3 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status <> 5  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 3
					and pu_permission_level = 0))  ) order by bg_id desc
2018-09-20 11:53:49 http://192.168.0.31/bugs.aspx elapsed milliseconds:0035
2018-09-20 11:53:54 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '0933203b-2ecf-44a7-8db3-187e79df7878';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '0933203b-2ecf-44a7-8db3-187e79df7878'
and us_active = 1
2018-09-20 11:53:54 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:53:54 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 17
2018-09-20 11:53:54 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
--isnull(st_name,'') [status],
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected','Open','In-Process','Ready to deploy','Hold') then  'New' else st_name end,'')[status],

 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 3 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status = 3  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 3
					and pu_permission_level = 0))  ) order by bg_id desc
2018-09-20 11:53:54 http://192.168.0.31/bugs.aspx elapsed milliseconds:0034
2018-09-20 11:53:58 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'0933203b-2ecf-44a7-8db3-187e79df7878'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 11:53:58 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:54:02 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:54:02 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-09-20 11:54:02 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:54:02 http://192.168.0.31/default.aspx?msg=logged+off User admin entered an incorrect password.
2018-09-20 11:54:05 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:54:05 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-09-20 11:54:05 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:54:05 http://192.168.0.31/default.aspx?msg=logged+off failed attempt count for admin:1
2018-09-20 11:54:05 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-09-20 11:54:05 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'admin'
2018-09-20 11:54:05 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:54:05 http://192.168.0.31/default.aspx?msg=logged+off guid=c10b18b1-e9d1-41d7-8103-3d67bde6f5f2
2018-09-20 11:54:05 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('c10b18b1-e9d1-41d7-8103-3d67bde6f5f2', 1)
2018-09-20 11:54:05 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 11:54:05 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:54:05 http://192.168.0.31/bugs.aspx elapsed milliseconds:0005
2018-09-20 11:54:05 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 11:54:05 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:54:05 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-09-20 11:54:05 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:54:05 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:54:05 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:54:07 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:54:07 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:54:07 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:54:07 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:54:11 http://192.168.0.31/edit_query.aspx?id=17 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:54:11 http://192.168.0.31/edit_query.aspx?id=17 elapsed milliseconds:0000
2018-09-20 11:54:11 http://192.168.0.31/edit_query.aspx?id=17 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:54:11 http://192.168.0.31/edit_query.aspx?id=17 elapsed milliseconds:0000
2018-09-20 11:54:11 http://192.168.0.31/edit_query.aspx?id=17 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 17
2018-09-20 11:54:11 http://192.168.0.31/edit_query.aspx?id=17 elapsed milliseconds:0001
2018-09-20 11:54:15 http://192.168.0.31/edit_query.aspx?id=17 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:54:15 http://192.168.0.31/edit_query.aspx?id=17 elapsed milliseconds:0000
2018-09-20 11:54:15 http://192.168.0.31/edit_query.aspx?id=17 sql=
select count(1) from queries where qu_desc = N'QC view' and qu_id <> 17
2018-09-20 11:54:15 http://192.168.0.31/edit_query.aspx?id=17 sql=
update queries set
				qu_desc = N'QC view',
				qu_sql = N'select isnull(pr_background_color,''#ffffff''), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'''') [project], isnull(og_name,'''') [organization], isnull(ct_name,'''') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'''') [priority], isnull(asg.us_username,'''') [assigned to],
--isnull(st_name,'''') [status],
 isnull(case when st_name IN(''Waiting for approval'',''Approved'',''Rejected'',''Open'',''In-Process'',''Ready to deploy'',''Hold'') then  ''New'' else st_name end,'''')[status],

 isnull(lu.us_username,'''') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = $ME 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where bg_status = 3 order by bg_id desc',
				qu_user = 0,
				qu_org = 1
				where qu_id = 17
2018-09-20 11:54:15 http://192.168.0.31/edit_query.aspx?id=17 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:54:15 http://192.168.0.31/edit_query.aspx?id=17 elapsed milliseconds:0000
2018-09-20 11:54:15 http://192.168.0.31/edit_query.aspx?id=17 sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:54:15 http://192.168.0.31/edit_query.aspx?id=17 elapsed milliseconds:0001
2018-09-20 11:54:19 http://192.168.0.31/edit_query.aspx?id=1 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:54:19 http://192.168.0.31/edit_query.aspx?id=1 elapsed milliseconds:0000
2018-09-20 11:54:19 http://192.168.0.31/edit_query.aspx?id=1 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:54:19 http://192.168.0.31/edit_query.aspx?id=1 elapsed milliseconds:0000
2018-09-20 11:54:19 http://192.168.0.31/edit_query.aspx?id=1 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 1
2018-09-20 11:54:19 http://192.168.0.31/edit_query.aspx?id=1 elapsed milliseconds:0000
2018-09-20 11:54:21 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:54:21 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:54:21 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:54:21 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:55:13 http://192.168.0.31/edit_query.aspx?id=14 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:55:13 http://192.168.0.31/edit_query.aspx?id=14 elapsed milliseconds:0000
2018-09-20 11:55:13 http://192.168.0.31/edit_query.aspx?id=14 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:55:13 http://192.168.0.31/edit_query.aspx?id=14 elapsed milliseconds:0000
2018-09-20 11:55:13 http://192.168.0.31/edit_query.aspx?id=14 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 14
2018-09-20 11:55:13 http://192.168.0.31/edit_query.aspx?id=14 elapsed milliseconds:0000
2018-09-20 11:55:16 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:55:16 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:55:16 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:55:16 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:55:19 http://192.168.0.31/edit_query.aspx?id=17 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:55:19 http://192.168.0.31/edit_query.aspx?id=17 elapsed milliseconds:0000
2018-09-20 11:55:19 http://192.168.0.31/edit_query.aspx?id=17 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:55:19 http://192.168.0.31/edit_query.aspx?id=17 elapsed milliseconds:0000
2018-09-20 11:55:19 http://192.168.0.31/edit_query.aspx?id=17 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 17
2018-09-20 11:55:19 http://192.168.0.31/edit_query.aspx?id=17 elapsed milliseconds:0000
2018-09-20 11:55:21 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:55:21 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:55:21 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:55:21 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:55:26 http://192.168.0.31/edit_query.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:55:26 http://192.168.0.31/edit_query.aspx?id=3 elapsed milliseconds:0000
2018-09-20 11:55:26 http://192.168.0.31/edit_query.aspx?id=3 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:55:26 http://192.168.0.31/edit_query.aspx?id=3 elapsed milliseconds:0000
2018-09-20 11:55:26 http://192.168.0.31/edit_query.aspx?id=3 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 3
2018-09-20 11:55:26 http://192.168.0.31/edit_query.aspx?id=3 elapsed milliseconds:0000
2018-09-20 11:55:47 http://192.168.0.31/edit_query.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:55:47 http://192.168.0.31/edit_query.aspx?id=3 elapsed milliseconds:0000
2018-09-20 11:55:47 http://192.168.0.31/edit_query.aspx?id=3 sql=
select count(1) from queries where qu_desc = N'open bugs assigned to me' and qu_id <> 3
2018-09-20 11:55:47 http://192.168.0.31/edit_query.aspx?id=3 sql=
update queries set
				qu_desc = N'open bugs assigned to me',
				qu_sql = N'select isnull(pr_background_color,''#ffffff''), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'''') [project], isnull(og_name,'''') [organization], isnull(ct_name,'''') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'''') [priority], isnull(asg.us_username,'''') [assigned to],
 isnull(st_name,'''') [status], isnull(lu.us_username,'''') [last updated by],bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = $ME 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where bg_status <> 5 and bg_assigned_to_user = $ME order by bg_id desc',
				qu_user = 0,
				qu_org = 1
				where qu_id = 3
2018-09-20 11:55:47 http://192.168.0.31/edit_query.aspx?id=3 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:55:47 http://192.168.0.31/edit_query.aspx?id=3 elapsed milliseconds:0000
2018-09-20 11:55:47 http://192.168.0.31/edit_query.aspx?id=3 sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:55:47 http://192.168.0.31/edit_query.aspx?id=3 elapsed milliseconds:0001
2018-09-20 11:56:00 http://192.168.0.31/edit_query.aspx?id=5 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:00 http://192.168.0.31/edit_query.aspx?id=5 elapsed milliseconds:0000
2018-09-20 11:56:00 http://192.168.0.31/edit_query.aspx?id=5 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:56:00 http://192.168.0.31/edit_query.aspx?id=5 elapsed milliseconds:0000
2018-09-20 11:56:00 http://192.168.0.31/edit_query.aspx?id=5 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 5
2018-09-20 11:56:00 http://192.168.0.31/edit_query.aspx?id=5 elapsed milliseconds:0001
2018-09-20 11:56:02 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:02 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:56:02 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:56:02 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:56:05 http://192.168.0.31/edit_query.aspx?id=9 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:05 http://192.168.0.31/edit_query.aspx?id=9 elapsed milliseconds:0000
2018-09-20 11:56:05 http://192.168.0.31/edit_query.aspx?id=9 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:56:05 http://192.168.0.31/edit_query.aspx?id=9 elapsed milliseconds:0000
2018-09-20 11:56:05 http://192.168.0.31/edit_query.aspx?id=9 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 9
2018-09-20 11:56:05 http://192.168.0.31/edit_query.aspx?id=9 elapsed milliseconds:0000
2018-09-20 11:56:09 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:09 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:56:09 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:56:09 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:56:12 http://192.168.0.31/edit_query.aspx?id=11 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:12 http://192.168.0.31/edit_query.aspx?id=11 elapsed milliseconds:0000
2018-09-20 11:56:12 http://192.168.0.31/edit_query.aspx?id=11 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:56:12 http://192.168.0.31/edit_query.aspx?id=11 elapsed milliseconds:0000
2018-09-20 11:56:12 http://192.168.0.31/edit_query.aspx?id=11 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 11
2018-09-20 11:56:12 http://192.168.0.31/edit_query.aspx?id=11 elapsed milliseconds:0000
2018-09-20 11:56:14 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:14 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:56:14 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:56:14 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:56:17 http://192.168.0.31/edit_query.aspx?id=7 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:17 http://192.168.0.31/edit_query.aspx?id=7 elapsed milliseconds:0000
2018-09-20 11:56:17 http://192.168.0.31/edit_query.aspx?id=7 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:56:17 http://192.168.0.31/edit_query.aspx?id=7 elapsed milliseconds:0000
2018-09-20 11:56:17 http://192.168.0.31/edit_query.aspx?id=7 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 7
2018-09-20 11:56:17 http://192.168.0.31/edit_query.aspx?id=7 elapsed milliseconds:0002
2018-09-20 11:56:20 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:20 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:56:20 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:56:20 http://192.168.0.31/queries.aspx elapsed milliseconds:0002
2018-09-20 11:56:24 http://192.168.0.31/edit_query.aspx?id=13 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:24 http://192.168.0.31/edit_query.aspx?id=13 elapsed milliseconds:0000
2018-09-20 11:56:24 http://192.168.0.31/edit_query.aspx?id=13 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:56:24 http://192.168.0.31/edit_query.aspx?id=13 elapsed milliseconds:0000
2018-09-20 11:56:24 http://192.168.0.31/edit_query.aspx?id=13 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 13
2018-09-20 11:56:24 http://192.168.0.31/edit_query.aspx?id=13 elapsed milliseconds:0000
2018-09-20 11:56:26 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:26 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:56:26 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:56:26 http://192.168.0.31/queries.aspx elapsed milliseconds:0002
2018-09-20 11:56:29 http://192.168.0.31/edit_query.aspx?id=18 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:29 http://192.168.0.31/edit_query.aspx?id=18 elapsed milliseconds:0000
2018-09-20 11:56:29 http://192.168.0.31/edit_query.aspx?id=18 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:56:29 http://192.168.0.31/edit_query.aspx?id=18 elapsed milliseconds:0000
2018-09-20 11:56:29 http://192.168.0.31/edit_query.aspx?id=18 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 18
2018-09-20 11:56:29 http://192.168.0.31/edit_query.aspx?id=18 elapsed milliseconds:0001
2018-09-20 11:56:30 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:30 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:56:30 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:56:30 http://192.168.0.31/queries.aspx elapsed milliseconds:0003
2018-09-20 11:56:35 http://192.168.0.31/edit_query.aspx?id=16 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:35 http://192.168.0.31/edit_query.aspx?id=16 elapsed milliseconds:0000
2018-09-20 11:56:35 http://192.168.0.31/edit_query.aspx?id=16 sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:56:35 http://192.168.0.31/edit_query.aspx?id=16 elapsed milliseconds:0000
2018-09-20 11:56:35 http://192.168.0.31/edit_query.aspx?id=16 sql=
select
				qu_desc, qu_sql, isnull(qu_user,0) [qu_user], isnull(qu_org,0) [qu_org]
				from queries where qu_id = 16
2018-09-20 11:56:35 http://192.168.0.31/edit_query.aspx?id=16 elapsed milliseconds:0001
2018-09-20 11:56:36 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:36 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:56:36 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:56:36 http://192.168.0.31/queries.aspx elapsed milliseconds:0003
2018-09-20 11:56:41 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:41 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:56:41 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 1 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:56:41 http://192.168.0.31/queries.aspx elapsed milliseconds:0008
2018-09-20 11:56:42 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:42 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:56:42 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:56:42 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:56:43 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:43 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:56:43 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 1 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:56:43 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:56:43 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:43 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:56:43 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:56:43 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:56:44 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:44 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:56:44 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 1 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:56:44 http://192.168.0.31/queries.aspx elapsed milliseconds:0005
2018-09-20 11:56:50 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:50 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:56:50 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:56:50 http://192.168.0.31/queries.aspx elapsed milliseconds:0006
2018-09-20 11:56:52 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:52 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:56:52 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 11:56:52 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:56:52 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-09-20 11:56:52 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 11:56:52 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 11:56:56 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:56 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:56:56 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:56:56 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:56:57 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:56:57 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:56:57 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 1 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:56:57 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:57:05 http://192.168.0.31/edit_query.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:57:05 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0000
2018-09-20 11:57:05 http://192.168.0.31/edit_query.aspx sql=
/* populate org/user dropdowns */
select og_id, og_name from orgs order by og_name;
select us_id, us_username from users order by us_username
2018-09-20 11:57:05 http://192.168.0.31/edit_query.aspx elapsed milliseconds:0000
2018-09-20 11:57:18 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:57:18 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:57:18 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:57:18 http://192.168.0.31/queries.aspx elapsed milliseconds:0003
2018-09-20 11:57:21 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:57:21 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:57:21 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 1 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:57:21 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:57:30 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:57:30 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:57:30 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:57:30 http://192.168.0.31/queries.aspx elapsed milliseconds:0002
2018-09-20 11:57:31 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:57:31 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:57:31 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 1 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:57:31 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:57:32 http://192.168.0.31/queries.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
and us_active = 1
2018-09-20 11:57:32 http://192.168.0.31/queries.aspx elapsed milliseconds:0000
2018-09-20 11:57:32 http://192.168.0.31/queries.aspx sql=
select
			qu_desc [query],
			case
				when isnull(qu_user,0) = 0 and isnull(qu_org,0) is null then 'everybody'
				when isnull(qu_user,0) <> 0 then 'user:' + us_username
				when isnull(qu_org,0) <> 0 then 'org:' + og_name
				else ' '
				end [visibility],
			'<a href=bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>view list</a>' [view list],
			'<a target=_blank href=print_bugs.aspx?qu_id=' + convert(varchar,qu_id) + '>print list</a>' [print list],
			'<a target=_blank href=print_bugs.aspx?format=excel&qu_id=' + convert(varchar,qu_id) + '>export as excel</a>' [export as excel],
			'<a target=_blank href=print_bugs2.aspx?qu_id=' + convert(varchar,qu_id) + '>print detail</a>' [print list<br>with detail],
			'<a href=edit_query.aspx?id=' + convert(varchar,qu_id) + '>edit</a>' [edit],
			'<a href=delete_query.aspx?id=' + convert(varchar,qu_id) + '>delete</a>' [delete],
			replace(convert(nvarchar(4000),qu_sql), char(10),'<br>') [sql]
			from queries
			left outer join users on qu_user = us_id
			left outer join orgs on qu_org = og_id
			where 1 = 0 /* all */
			or isnull(qu_user,0) = 1
			or isnull(qu_user,0) = 0
			order by qu_desc
2018-09-20 11:57:32 http://192.168.0.31/queries.aspx elapsed milliseconds:0001
2018-09-20 11:57:34 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'c10b18b1-e9d1-41d7-8103-3d67bde6f5f2'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 11:57:34 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:57:38 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 11:57:38 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'dev1'
2018-09-20 11:57:38 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:57:38 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 2
2018-09-20 11:57:38 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'dev1'
2018-09-20 11:57:38 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 11:57:38 http://192.168.0.31/default.aspx?msg=logged+off guid=8a13fdc9-34c5-4790-9d95-00741cd6dafa
2018-09-20 11:57:38 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('8a13fdc9-34c5-4790-9d95-00741cd6dafa', 2)
2018-09-20 11:57:38 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 11:57:38 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '8a13fdc9-34c5-4790-9d95-00741cd6dafa';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '8a13fdc9-34c5-4790-9d95-00741cd6dafa'
and us_active = 1
2018-09-20 11:57:38 http://192.168.0.31/bugs.aspx elapsed milliseconds:0012
2018-09-20 11:57:38 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 2
or isnull(qu_org,0) = 2
order by qu_desc
2018-09-20 11:57:38 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:57:38 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 2)
2018-09-20 11:57:38 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 11:57:38 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected', 'Ready to deploy','Hold') then  'New' else st_name end,'')[status],
 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 2 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 2
					and pu_permission_level = 0)) order by bg_id desc

2018-09-20 11:57:38 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:57:44 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '8a13fdc9-34c5-4790-9d95-00741cd6dafa';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '8a13fdc9-34c5-4790-9d95-00741cd6dafa'
and us_active = 1
2018-09-20 11:57:44 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 11:57:44 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 2
2018-09-20 11:57:44 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project],isnull(bg_project_custom_dropdown_value1,'') [Version],
  isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 2 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
 where /* altered - both  */ (  bg_status <> 5  ) AND (  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 2
					and pu_permission_level = 0))  ) order by bg_id desc
2018-09-20 11:57:44 http://192.168.0.31/bugs.aspx elapsed milliseconds:0024
2018-09-20 11:57:48 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '8a13fdc9-34c5-4790-9d95-00741cd6dafa';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '8a13fdc9-34c5-4790-9d95-00741cd6dafa'
and us_active = 1
2018-09-20 11:57:48 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 11:57:48 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 12
2018-09-20 11:57:48 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected', 'Ready to deploy','Hold') then  'New' else st_name end,'')[status],
 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 2 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 2
					and pu_permission_level = 0)) order by bg_id desc

2018-09-20 11:57:48 http://192.168.0.31/bugs.aspx elapsed milliseconds:0005
2018-09-20 11:59:51 http://192.168.0.31/search.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '8a13fdc9-34c5-4790-9d95-00741cd6dafa';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '8a13fdc9-34c5-4790-9d95-00741cd6dafa'
and us_active = 1
2018-09-20 11:59:51 http://192.168.0.31/search.aspx elapsed milliseconds:0000
2018-09-20 11:59:51 http://192.168.0.31/search.aspx sql=

/* get related users 2 */
select  pj_id, us_id,
case when 0 = 1 then
    case when len(isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')) > 1
	then isnull(us_firstname,'') + ' ' + isnull(us_lastname,'')
    else us_username end
else us_username end us_username,
isnull(us_email,'') us_email
into #temp
from projects, users
where pj_id not in
(
	select pu_project from project_user_xref
	where pu_permission_level = 0 and pu_user = 2
)





if 0 = 1 -- external
and 2 = 0 -- other orgs
begin
	select distinct a.us_id, a.us_username, a.us_email
	from #temp a
	inner join users b on a.us_id = b.us_id
	inner join orgs on b.us_org = og_id
	where og_external_user = 0 or b.us_org = 2
	order by a.us_username
end
else
begin

	select distinct us_id, us_username, us_email
		from #temp
		left outer join project_user_xref on pj_id = pu_project
		and us_id = pu_user
		where isnull(pu_permission_level,2) <> 0
		order by us_username
end

drop table #temp
2018-09-20 11:59:51 http://192.168.0.31/search.aspx elapsed milliseconds:0105
2018-09-20 11:59:51 http://192.168.0.31/search.aspx sql=
/* drop downs */ select pj_id, pj_name
			from projects
			left outer join project_user_xref on pj_id = pu_project
			and pu_user = 2
			where isnull(pu_permission_level,2) <> 0
			order by pj_name; select og_id, og_name from orgs order by og_name;
	select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
	select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
	select st_id, st_name from statuses order by st_sort_seq, st_name;
	select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name
2018-09-20 11:59:51 http://192.168.0.31/search.aspx elapsed milliseconds:0033
2018-09-20 11:59:51 http://192.168.0.31/search.aspx sql=

select count(1)
from projects
where isnull(pj_enable_custom_dropdown1,0) = 1
or isnull(pj_enable_custom_dropdown2,0) = 1
or isnull(pj_enable_custom_dropdown3,0) = 1
2018-09-20 12:00:41 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '8a13fdc9-34c5-4790-9d95-00741cd6dafa';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '8a13fdc9-34c5-4790-9d95-00741cd6dafa'
and us_active = 1
2018-09-20 12:00:41 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 12:00:41 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 2
or isnull(qu_org,0) = 2
order by qu_desc
2018-09-20 12:00:41 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 12:00:41 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 12
2018-09-20 12:00:41 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by], 
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to], 
 --isnull(st_name,'') [status],
 isnull(case when st_name IN('Waiting for approval','Approved','Rejected', 'Ready to deploy','Hold') then  'New' else st_name end,'')[status],
 isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on] 
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 2 
 left outer join users rpt on rpt.us_id = bg_reported_user 
 left outer join users asg on asg.us_id = bg_assigned_to_user 
 left outer join users lu on lu.us_id = bg_last_updated_user 
 left outer join projects on pj_id = bg_project 
 left outer join orgs on og_id = bg_org 
 left outer join categories on ct_id = bg_category 
 left outer join priorities on pr_id = bg_priority 
 left outer join statuses on st_id = bg_status 
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 2
					and pu_permission_level = 0)) order by bg_id desc

2018-09-20 12:00:41 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 12:00:44 http://192.168.0.31/ajax.aspx?bugid=36 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '8a13fdc9-34c5-4790-9d95-00741cd6dafa';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '8a13fdc9-34c5-4790-9d95-00741cd6dafa'
and us_active = 1
2018-09-20 12:00:44 http://192.168.0.31/ajax.aspx?bugid=36 elapsed milliseconds:0001
2018-09-20 12:00:44 http://192.168.0.31/ajax.aspx?bugid=36 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 2
where bg_id = 36
2018-09-20 12:00:44 http://192.168.0.31/ajax.aspx?bugid=36 elapsed milliseconds:0006
2018-09-20 12:00:44 http://192.168.0.31/ajax.aspx?bugid=36 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 36
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 12:00:44 http://192.168.0.31/ajax.aspx?bugid=36 elapsed milliseconds:0020
2018-09-20 12:00:44 http://192.168.0.31/edit_bug.aspx?id=36 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '8a13fdc9-34c5-4790-9d95-00741cd6dafa';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '8a13fdc9-34c5-4790-9d95-00741cd6dafa'
and us_active = 1
2018-09-20 12:00:44 http://192.168.0.31/edit_bug.aspx?id=36 elapsed milliseconds:0000
2018-09-20 12:00:44 http://192.168.0.31/edit_bug.aspx?id=36 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	2 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]

from bugs
inner join users this_user on us_id = 2
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 2
left outer join project_user_xref on pj_id = pu_project
and pu_user = 2
where bg_id = 36
2018-09-20 12:00:44 http://192.168.0.31/edit_bug.aspx?id=36 elapsed milliseconds:0024
2018-09-20 12:00:44 http://192.168.0.31/edit_bug.aspx?id=36 sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 2
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2018-09-20 12:00:44 http://192.168.0.31/edit_bug.aspx?id=36 elapsed milliseconds:0004
2018-09-20 12:00:44 http://192.168.0.31/edit_bug.aspx?id=36 sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 2 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 4
		and pu_permission_level = 0)
order by us_username; 
2018-09-20 12:00:44 http://192.168.0.31/edit_bug.aspx?id=36 elapsed milliseconds:0004
2018-09-20 12:00:44 http://192.168.0.31/edit_bug.aspx?id=36 sql=
select isnull(pj_default_user,0)
					from projects
					where pj_id = 4
2018-09-20 12:00:44 http://192.168.0.31/edit_bug.aspx?id=36 sql=
select
			isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
			isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
			isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
			isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
			isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
			isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3],
			isnull(pj_custom_dropdown_values1,'') [pj_custom_dropdown_values1],
			isnull(pj_custom_dropdown_values2,'') [pj_custom_dropdown_values2],
			isnull(pj_custom_dropdown_values3,'') [pj_custom_dropdown_values3]
			from projects where pj_id = 4
2018-09-20 12:00:44 http://192.168.0.31/edit_bug.aspx?id=36 elapsed milliseconds:0001
2018-09-20 12:00:44 http://192.168.0.31/edit_bug.aspx?id=36 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 36
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 12:00:44 http://192.168.0.31/edit_bug.aspx?id=36 elapsed milliseconds:0000
2018-09-20 12:00:48 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'8a13fdc9-34c5-4790-9d95-00741cd6dafa'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 12:00:48 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 12:00:52 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 12:00:52 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-09-20 12:00:52 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 12:00:52 http://192.168.0.31/default.aspx?msg=logged+off failed attempt count for admin:0
2018-09-20 12:00:52 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-09-20 12:00:52 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'admin'
2018-09-20 12:00:52 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 12:00:52 http://192.168.0.31/default.aspx?msg=logged+off guid=d5c94cba-7a57-42fa-8402-f07b093ee3e6
2018-09-20 12:00:52 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('d5c94cba-7a57-42fa-8402-f07b093ee3e6', 1)
2018-09-20 12:00:52 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 12:00:52 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'd5c94cba-7a57-42fa-8402-f07b093ee3e6';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'd5c94cba-7a57-42fa-8402-f07b093ee3e6'
and us_active = 1
2018-09-20 12:00:52 http://192.168.0.31/bugs.aspx elapsed milliseconds:0005
2018-09-20 12:00:52 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 12:00:52 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 12:00:52 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-09-20 12:00:52 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 12:00:52 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 12:00:52 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 12:00:53 http://192.168.0.31/ajax.aspx?bugid=36 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'd5c94cba-7a57-42fa-8402-f07b093ee3e6';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'd5c94cba-7a57-42fa-8402-f07b093ee3e6'
and us_active = 1
2018-09-20 12:00:53 http://192.168.0.31/ajax.aspx?bugid=36 elapsed milliseconds:0000
2018-09-20 12:00:53 http://192.168.0.31/ajax.aspx?bugid=36 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 36
2018-09-20 12:00:53 http://192.168.0.31/ajax.aspx?bugid=36 elapsed milliseconds:0001
2018-09-20 12:00:53 http://192.168.0.31/ajax.aspx?bugid=36 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 36
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 12:00:53 http://192.168.0.31/ajax.aspx?bugid=36 elapsed milliseconds:0000
2018-09-20 12:00:53 http://192.168.0.31/edit_bug.aspx?id=36 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'd5c94cba-7a57-42fa-8402-f07b093ee3e6';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'd5c94cba-7a57-42fa-8402-f07b093ee3e6'
and us_active = 1
2018-09-20 12:00:53 http://192.168.0.31/edit_bug.aspx?id=36 elapsed milliseconds:0000
2018-09-20 12:00:53 http://192.168.0.31/edit_bug.aspx?id=36 sql=
 /* get_bug_datarow */
declare @svn_revisions int
declare @git_commits int
declare @hg_revisions int
declare @tasks int
declare @related int;
set @svn_revisions = 0
set @git_commits = 0
set @hg_revisions = 0
set @tasks = 0
set @related = 0

select bg_id [id],
bg_short_desc [short_desc],
isnull(bg_tags,'') [bg_tags],
isnull(ru.us_username,'[deleted user]') [reporter],
isnull(ru.us_email,'') [reporter_email],
case rtrim(ru.us_firstname)
	when null then isnull(ru.us_lastname, '')
	when '' then isnull(ru.us_lastname, '')
	else isnull(ru.us_lastname + ', ' + ru.us_firstname,'')
	end [reporter_fullname],
bg_reported_date [reported_date],
datediff(s,bg_reported_date,getdate()) [seconds_ago],
isnull(lu.us_username,'') [last_updated_user],
case rtrim(lu.us_firstname)
	when null then isnull(lu.us_lastname, '')
	when '' then isnull(lu.us_lastname, '')
	else isnull(lu.us_lastname + ', ' + lu.us_firstname,'')
	end [last_updated_fullname],


bg_last_updated_date [last_updated_date],
isnull(bg_project,0) [project],
isnull(pj_name,'[no project]') [current_project],

isnull(bg_org,0) [organization],
isnull(bugorg.og_name,'') [og_name],

isnull(bg_category,0) [category],
isnull(ct_name,'') [category_name],

isnull(bg_priority,0) [priority],
isnull(pr_name,'') [priority_name],

isnull(bg_status,0) [status],
isnull(st_name,'') [status_name],

isnull(bg_user_defined_attribute,0) [udf],
isnull(udf_name,'') [udf_name],

isnull(bg_assigned_to_user,0) [assigned_to_user],
isnull(asg.us_username,'[not assigned]') [assigned_to_username],
case rtrim(asg.us_firstname)
when null then isnull(asg.us_lastname, '[not assigned]')
when '' then isnull(asg.us_lastname, '[not assigned]')
else isnull(asg.us_lastname + ', ' + asg.us_firstname,'[not assigned]')
end [assigned_to_fullname],

isnull(bs_user,0) [subscribed],

case
when
	1 <> bg_org
	and userorg.og_other_orgs_permission_level < 2
	and userorg.og_other_orgs_permission_level < isnull(pu_permission_level,2)
		then userorg.og_other_orgs_permission_level
else
	isnull(pu_permission_level,2)
end [pu_permission_level],

isnull(bg_project_custom_dropdown_value1,'') [bg_project_custom_dropdown_value1],
isnull(bg_project_custom_dropdown_value2,'') [bg_project_custom_dropdown_value2],
isnull(bg_project_custom_dropdown_value3,'') [bg_project_custom_dropdown_value3],
@related [relationship_cnt],
@svn_revisions [svn_revision_cnt],
@git_commits [git_commit_cnt],
@hg_revisions [hg_commit_cnt],
@tasks [task_cnt],
getdate() [snapshot_timestamp]

from bugs
inner join users this_user on us_id = 1
inner join orgs userorg on this_user.us_org = userorg.og_id
left outer join user_defined_attribute on bg_user_defined_attribute = udf_id
left outer join projects on bg_project = pj_id
left outer join orgs bugorg on bg_org = bugorg.og_id
left outer join categories on bg_category = ct_id
left outer join priorities on bg_priority = pr_id
left outer join statuses on bg_status = st_id
left outer join users asg on bg_assigned_to_user = asg.us_id
left outer join users ru on bg_reported_user = ru.us_id
left outer join users lu on bg_last_updated_user = lu.us_id
left outer join bug_subscriptions on bs_bug = bg_id and bs_user = 1
left outer join project_user_xref on pj_id = pu_project
and pu_user = 1
where bg_id = 36
2018-09-20 12:00:53 http://192.168.0.31/edit_bug.aspx?id=36 elapsed milliseconds:0013
2018-09-20 12:00:53 http://192.168.0.31/edit_bug.aspx?id=36 sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2018-09-20 12:00:53 http://192.168.0.31/edit_bug.aspx?id=36 elapsed milliseconds:0004
2018-09-20 12:00:53 http://192.168.0.31/edit_bug.aspx?id=36 sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 4
		and pu_permission_level = 0)
order by us_username; 
2018-09-20 12:00:53 http://192.168.0.31/edit_bug.aspx?id=36 elapsed milliseconds:0004
2018-09-20 12:00:53 http://192.168.0.31/edit_bug.aspx?id=36 sql=
select isnull(pj_default_user,0)
					from projects
					where pj_id = 4
2018-09-20 12:00:53 http://192.168.0.31/edit_bug.aspx?id=36 sql=
select
			isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
			isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
			isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
			isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
			isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
			isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3],
			isnull(pj_custom_dropdown_values1,'') [pj_custom_dropdown_values1],
			isnull(pj_custom_dropdown_values2,'') [pj_custom_dropdown_values2],
			isnull(pj_custom_dropdown_values3,'') [pj_custom_dropdown_values3]
			from projects where pj_id = 4
2018-09-20 12:00:53 http://192.168.0.31/edit_bug.aspx?id=36 elapsed milliseconds:0000
2018-09-20 12:00:53 http://192.168.0.31/edit_bug.aspx?id=36 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 36
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 12:00:53 http://192.168.0.31/edit_bug.aspx?id=36 elapsed milliseconds:0000
2018-09-20 12:01:09 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'd5c94cba-7a57-42fa-8402-f07b093ee3e6'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 12:01:09 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 12:01:13 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 12:01:13 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-09-20 12:01:13 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 12:01:13 http://192.168.0.31/default.aspx?msg=logged+off failed attempt count for admin:0
2018-09-20 12:01:13 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-09-20 12:01:13 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'admin'
2018-09-20 12:01:13 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 12:01:13 http://192.168.0.31/default.aspx?msg=logged+off guid=cadb11af-9a2f-4fa4-8ae9-b6ea5a530671
2018-09-20 12:01:13 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('cadb11af-9a2f-4fa4-8ae9-b6ea5a530671', 1)
2018-09-20 12:01:13 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 12:01:13 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'cadb11af-9a2f-4fa4-8ae9-b6ea5a530671';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'cadb11af-9a2f-4fa4-8ae9-b6ea5a530671'
and us_active = 1
2018-09-20 12:01:13 http://192.168.0.31/bugs.aspx elapsed milliseconds:0005
2018-09-20 12:01:13 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 12:01:13 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 12:01:13 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-09-20 12:01:13 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 12:01:13 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 12:01:13 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 12:01:14 http://192.168.0.31/ajax.aspx?bugid=25 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'cadb11af-9a2f-4fa4-8ae9-b6ea5a530671';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'cadb11af-9a2f-4fa4-8ae9-b6ea5a530671'
and us_active = 1
2018-09-20 12:01:14 http://192.168.0.31/ajax.aspx?bugid=25 elapsed milliseconds:0001
2018-09-20 12:01:14 http://192.168.0.31/ajax.aspx?bugid=25 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 25
2018-09-20 12:01:14 http://192.168.0.31/ajax.aspx?bugid=25 elapsed milliseconds:0006
2018-09-20 12:01:14 http://192.168.0.31/ajax.aspx?bugid=25 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 25
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 12:01:14 http://192.168.0.31/ajax.aspx?bugid=25 elapsed milliseconds:0018
2018-09-20 12:01:15 http://192.168.0.31/ajax.aspx?bugid=35 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'cadb11af-9a2f-4fa4-8ae9-b6ea5a530671';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'cadb11af-9a2f-4fa4-8ae9-b6ea5a530671'
and us_active = 1
2018-09-20 12:01:15 http://192.168.0.31/ajax.aspx?bugid=35 elapsed milliseconds:0001
2018-09-20 12:01:15 http://192.168.0.31/ajax.aspx?bugid=35 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 35
2018-09-20 12:01:15 http://192.168.0.31/ajax.aspx?bugid=35 elapsed milliseconds:0001
2018-09-20 12:01:15 http://192.168.0.31/ajax.aspx?bugid=35 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 35
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 12:01:15 http://192.168.0.31/ajax.aspx?bugid=35 elapsed milliseconds:0001
2018-09-20 12:01:46 http://192.168.0.31/ajax.aspx?bugid=29 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'cadb11af-9a2f-4fa4-8ae9-b6ea5a530671';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'cadb11af-9a2f-4fa4-8ae9-b6ea5a530671'
and us_active = 1
2018-09-20 12:01:46 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0000
2018-09-20 12:01:46 http://192.168.0.31/ajax.aspx?bugid=29 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 29
2018-09-20 12:01:46 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0001
2018-09-20 12:01:46 http://192.168.0.31/ajax.aspx?bugid=29 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 29
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 12:01:46 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0005
2018-09-20 12:14:33 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'cadb11af-9a2f-4fa4-8ae9-b6ea5a530671'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 12:14:33 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 12:14:36 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 12:14:36 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-09-20 12:14:36 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0001
2018-09-20 12:14:36 http://192.168.0.31/default.aspx?msg=logged+off failed attempt count for admin:0
2018-09-20 12:14:36 http://192.168.0.31/default.aspx?msg=logged+off User admin entered an incorrect password.
2018-09-20 14:26:55  caught exception in util.set_context:Request is not available in this context
2018-09-20 14:26:55  threadproc_votes
2018-09-20 14:26:55  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 14:26:55  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 14:26:55  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 14:26:55 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 14:26:55 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-09-20 14:26:55 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0001
2018-09-20 14:26:55 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-09-20 14:26:55 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'admin'
2018-09-20 14:26:55  elapsed milliseconds:0090
2018-09-20 14:26:55 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 14:26:55  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 14:26:55  elapsed milliseconds:0042
2018-09-20 14:26:55  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 14:26:55 http://192.168.0.31/default.aspx?msg=logged+off guid=581f6851-7806-4f65-8485-b3012b226121
2018-09-20 14:26:55 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('581f6851-7806-4f65-8485-b3012b226121', 1)
2018-09-20 14:26:55 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 14:26:55  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 14:26:55  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 14:26:55  elapsed milliseconds:0081
2018-09-20 14:26:55  elapsed milliseconds:0003
2018-09-20 14:26:55  done creating Lucene index
2018-09-20 14:26:55 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '581f6851-7806-4f65-8485-b3012b226121';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '581f6851-7806-4f65-8485-b3012b226121'
and us_active = 1
2018-09-20 14:26:55 http://192.168.0.31/bugs.aspx elapsed milliseconds:0017
2018-09-20 14:26:55 http://192.168.0.31/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 14:26:55 http://192.168.0.31/bugs.aspx elapsed milliseconds:0108
2018-09-20 14:26:55 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 14:26:55 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 14:26:56 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-09-20 14:26:56 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 14:26:56 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 14:26:56 http://192.168.0.31/bugs.aspx elapsed milliseconds:0015
2018-09-20 14:27:00 http://192.168.0.31/edit_bug.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '581f6851-7806-4f65-8485-b3012b226121';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '581f6851-7806-4f65-8485-b3012b226121'
and us_active = 1
2018-09-20 14:27:00 http://192.168.0.31/edit_bug.aspx elapsed milliseconds:0000
2018-09-20 14:27:00 http://192.168.0.31/edit_bug.aspx sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2018-09-20 14:27:00 http://192.168.0.31/edit_bug.aspx elapsed milliseconds:0000
2018-09-20 14:27:00 http://192.168.0.31/edit_bug.aspx sql=

select top 1 pj_id from projects where pj_default = 1 order by pj_name;
select top 1 ct_id from categories where ct_default = 1 order by ct_name;
select top 1 pr_id from priorities where pr_default = 1 order by pr_name;
select top 1 st_id from statuses where st_default = 1 order by st_name;
select top 1 udf_id from user_defined_attribute where udf_default = 1 order by udf_name;
2018-09-20 14:27:00 http://192.168.0.31/edit_bug.aspx elapsed milliseconds:0036
2018-09-20 14:27:00 http://192.168.0.31/edit_bug.aspx sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 5
		and pu_permission_level = 0)
order by us_username; 
2018-09-20 14:27:00 http://192.168.0.31/edit_bug.aspx elapsed milliseconds:0040
2018-09-20 14:27:00 http://192.168.0.31/edit_bug.aspx sql=
select isnull(pj_default_user,0)
					from projects
					where pj_id = 5
2018-09-20 14:27:00 http://192.168.0.31/edit_bug.aspx sql=
select
			isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
			isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
			isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
			isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
			isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
			isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3],
			isnull(pj_custom_dropdown_values1,'') [pj_custom_dropdown_values1],
			isnull(pj_custom_dropdown_values2,'') [pj_custom_dropdown_values2],
			isnull(pj_custom_dropdown_values3,'') [pj_custom_dropdown_values3]
			from projects where pj_id = 5
2018-09-20 14:27:00 http://192.168.0.31/edit_bug.aspx elapsed milliseconds:0019
2018-09-20 14:33:45 http://192.168.0.31/edit_bug.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '581f6851-7806-4f65-8485-b3012b226121';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '581f6851-7806-4f65-8485-b3012b226121'
and us_active = 1
2018-09-20 14:33:45 http://192.168.0.31/edit_bug.aspx elapsed milliseconds:0000
2018-09-20 14:33:45 http://192.168.0.31/edit_bug.aspx sql=
/* drop downs */ select pj_id, pj_name
		from projects
		left outer join project_user_xref on pj_id = pu_project
		and pu_user = 1
		where pj_active = 1
		and isnull(pu_permission_level,2) not in (0, 1)
		order by pj_name;
select og_id, og_name from orgs where og_active = 1 order by og_name;
select ct_id, ct_name from categories order by ct_sort_seq, ct_name;
select pr_id, pr_name from priorities order by pr_sort_seq, pr_name;
select st_id, st_name from statuses order by st_sort_seq, st_name;
select udf_id, udf_name from user_defined_attribute order by udf_sort_seq, udf_name;
2018-09-20 14:33:45 http://192.168.0.31/edit_bug.aspx elapsed milliseconds:0000
2018-09-20 14:33:45 http://192.168.0.31/edit_bug.aspx sql=

select top 1 pj_id from projects where pj_default = 1 order by pj_name;
select top 1 ct_id from categories where ct_default = 1 order by ct_name;
select top 1 pr_id from priorities where pr_default = 1 order by pr_name;
select top 1 st_id from statuses where st_default = 1 order by st_name;
select top 1 udf_id from user_defined_attribute where udf_default = 1 order by udf_name;
2018-09-20 14:33:45 http://192.168.0.31/edit_bug.aspx elapsed milliseconds:0000
2018-09-20 14:33:45 http://192.168.0.31/edit_bug.aspx sql=

/* users this project */ select us_id, case when 0 = 1 then us_lastname + ', ' + us_firstname else us_username end us_username
from users
inner join orgs on us_org = og_id
where us_active = 1
and og_can_be_assigned_to = 1
and (2 <> 0 or 1 = og_id or (og_external_user = 0 and 0 = 1))
and us_id not in
	(select pu_user from project_user_xref
		where pu_project = 5
		and pu_permission_level = 0)
order by us_username; 
2018-09-20 14:33:45 http://192.168.0.31/edit_bug.aspx elapsed milliseconds:0000
2018-09-20 14:33:45 http://192.168.0.31/edit_bug.aspx sql=
select isnull(pj_default_user,0)
					from projects
					where pj_id = 5
2018-09-20 14:33:45 http://192.168.0.31/edit_bug.aspx sql=
select
			isnull(pj_enable_custom_dropdown1,0) [pj_enable_custom_dropdown1],
			isnull(pj_enable_custom_dropdown2,0) [pj_enable_custom_dropdown2],
			isnull(pj_enable_custom_dropdown3,0) [pj_enable_custom_dropdown3],
			isnull(pj_custom_dropdown_label1,'') [pj_custom_dropdown_label1],
			isnull(pj_custom_dropdown_label2,'') [pj_custom_dropdown_label2],
			isnull(pj_custom_dropdown_label3,'') [pj_custom_dropdown_label3],
			isnull(pj_custom_dropdown_values1,'') [pj_custom_dropdown_values1],
			isnull(pj_custom_dropdown_values2,'') [pj_custom_dropdown_values2],
			isnull(pj_custom_dropdown_values3,'') [pj_custom_dropdown_values3]
			from projects where pj_id = 5
2018-09-20 14:33:45 http://192.168.0.31/edit_bug.aspx elapsed milliseconds:0000
2018-09-20 14:34:02 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'581f6851-7806-4f65-8485-b3012b226121'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 14:34:02 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 15:18:16  caught exception in util.set_context:Request is not available in this context
2018-09-20 15:18:16  threadproc_votes
2018-09-20 15:18:16  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 15:18:16  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 15:18:16  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 15:18:17 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 15:18:17 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-09-20 15:18:17 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0002
2018-09-20 15:18:17  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 15:18:17  elapsed milliseconds:0294
2018-09-20 15:18:17  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 15:18:17 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-09-20 15:18:17  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 15:18:17  elapsed milliseconds:0001
2018-09-20 15:18:17 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 15:18:17 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-09-20 15:18:17 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 15:18:17 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-09-20 15:18:18  elapsed milliseconds:0328
2018-09-20 15:18:18  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 15:18:18 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'admin'
2018-09-20 15:18:18 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0031
2018-09-20 15:18:18 http://192.168.0.31/default.aspx?msg=logged+off guid=7c436beb-1075-4b90-875f-81e49979ae24
2018-09-20 15:18:18 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('7c436beb-1075-4b90-875f-81e49979ae24', 1)
2018-09-20 15:18:18 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'admin'
2018-09-20 15:18:18 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0000
2018-09-20 15:18:18 http://192.168.0.31/default.aspx?msg=logged+off guid=a65f55d9-194b-4866-b9d3-273d93b759e1
2018-09-20 15:18:18 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('a65f55d9-194b-4866-b9d3-273d93b759e1', 1)
2018-09-20 15:18:18  elapsed milliseconds:0271
2018-09-20 15:18:18 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 15:18:18 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 15:18:18  done creating Lucene index
2018-09-20 15:18:22 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 15:18:22 http://192.168.0.31/bugs.aspx elapsed milliseconds:0099
2018-09-20 15:18:22 http://192.168.0.31/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 15:18:23 http://192.168.0.31/bugs.aspx elapsed milliseconds:0583
2018-09-20 15:18:23 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 15:18:23 http://192.168.0.31/bugs.aspx elapsed milliseconds:0006
2018-09-20 15:18:24 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-09-20 15:18:24 http://192.168.0.31/bugs.aspx elapsed milliseconds:0219
2018-09-20 15:18:24 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 15:18:24 http://192.168.0.31/bugs.aspx elapsed milliseconds:0269
2018-09-20 15:18:25 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 15:18:25 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 15:18:25 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 15:18:25 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 15:18:25 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-09-20 15:18:25 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 15:18:25 http://192.168.0.31/bugs.aspx elapsed milliseconds:0003
2018-09-20 15:34:10 http://192.168.0.31/ajax.aspx?bugid=20 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 15:34:12 http://192.168.0.31/ajax.aspx?bugid=20 elapsed milliseconds:1977
2018-09-20 15:34:12 http://192.168.0.31/ajax.aspx?bugid=20 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 20
2018-09-20 15:34:13 http://192.168.0.31/ajax.aspx?bugid=20 elapsed milliseconds:0164
2018-09-20 15:34:13 http://192.168.0.31/ajax.aspx?bugid=20 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 20
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 15:34:13 http://192.168.0.31/ajax.aspx?bugid=20 elapsed milliseconds:0602
2018-09-20 16:09:41  caught exception in util.set_context:Request is not available in this context
2018-09-20 16:09:41  threadproc_votes
2018-09-20 16:09:41  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 16:09:41  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 16:09:41 http://192.168.0.31/ajax.aspx?bugid=28 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:09:41 http://192.168.0.31/ajax.aspx?bugid=36 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:09:41  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 16:09:41  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 16:09:41  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 16:09:41  elapsed milliseconds:0005
2018-09-20 16:09:41 http://192.168.0.31/ajax.aspx?bugid=36 elapsed milliseconds:0206
2018-09-20 16:09:41 http://192.168.0.31/ajax.aspx?bugid=36 sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 16:09:42 http://192.168.0.31/ajax.aspx?bugid=28 elapsed milliseconds:0409
2018-09-20 16:09:42 http://192.168.0.31/ajax.aspx?bugid=28 sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 16:09:42 http://192.168.0.31/ajax.aspx?bugid=36 elapsed milliseconds:0247
2018-09-20 16:09:42 http://192.168.0.31/ajax.aspx?bugid=36 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 36
2018-09-20 16:09:42 http://192.168.0.31/ajax.aspx?bugid=36 elapsed milliseconds:0002
2018-09-20 16:09:42 http://192.168.0.31/ajax.aspx?bugid=36 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 36
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:09:42 http://192.168.0.31/ajax.aspx?bugid=36 elapsed milliseconds:0101
2018-09-20 16:09:42  elapsed milliseconds:0769
2018-09-20 16:09:42  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 16:09:42  elapsed milliseconds:0002
2018-09-20 16:09:42  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 16:09:42  elapsed milliseconds:0074
2018-09-20 16:09:42  done creating Lucene index
2018-09-20 16:09:44 http://192.168.0.31/ajax.aspx?bugid=28 elapsed milliseconds:2636
2018-09-20 16:09:44 http://192.168.0.31/ajax.aspx?bugid=28 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 28
2018-09-20 16:09:44 http://192.168.0.31/ajax.aspx?bugid=28 elapsed milliseconds:0007
2018-09-20 16:09:44 http://192.168.0.31/ajax.aspx?bugid=28 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 28
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:09:44 http://192.168.0.31/ajax.aspx?bugid=28 elapsed milliseconds:0018
2018-09-20 16:27:52 http://192.168.0.31/ajax.aspx?bugid=32 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:27:53 http://192.168.0.31/ajax.aspx?bugid=32 elapsed milliseconds:0050
2018-09-20 16:27:53 http://192.168.0.31/ajax.aspx?bugid=32 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 32
2018-09-20 16:27:53 http://192.168.0.31/ajax.aspx?bugid=32 elapsed milliseconds:0004
2018-09-20 16:27:53 http://192.168.0.31/ajax.aspx?bugid=32 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 32
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:27:53 http://192.168.0.31/ajax.aspx?bugid=32 elapsed milliseconds:0009
2018-09-20 16:28:56 http://192.168.0.31/ajax.aspx?bugid=29 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:28:56 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0001
2018-09-20 16:28:56 http://192.168.0.31/ajax.aspx?bugid=29 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 29
2018-09-20 16:28:56 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0005
2018-09-20 16:28:56 http://192.168.0.31/ajax.aspx?bugid=29 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 29
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:28:56 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0012
2018-09-20 16:28:57 http://192.168.0.31/ajax.aspx?bugid=29 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:28:57 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0000
2018-09-20 16:28:57 http://192.168.0.31/ajax.aspx?bugid=29 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 29
2018-09-20 16:28:57 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0000
2018-09-20 16:28:57 http://192.168.0.31/ajax.aspx?bugid=29 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 29
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:28:57 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0000
2018-09-20 16:29:19 http://192.168.0.31/ajax.aspx?bugid=30 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:29:19 http://192.168.0.31/ajax.aspx?bugid=30 elapsed milliseconds:0001
2018-09-20 16:29:19 http://192.168.0.31/ajax.aspx?bugid=30 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 30
2018-09-20 16:29:19 http://192.168.0.31/ajax.aspx?bugid=30 elapsed milliseconds:0006
2018-09-20 16:29:19 http://192.168.0.31/ajax.aspx?bugid=30 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 30
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:29:19 http://192.168.0.31/ajax.aspx?bugid=30 elapsed milliseconds:0019
2018-09-20 16:30:38 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:30:38 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 16:30:38 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 16:30:38 http://192.168.0.31/bugs.aspx elapsed milliseconds:0031
2018-09-20 16:30:38 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-09-20 16:30:38 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 16:30:38 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 16:30:39 http://192.168.0.31/bugs.aspx elapsed milliseconds:0041
2018-09-20 16:30:41 http://192.168.0.31/ajax.aspx?bugid=30 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:30:41 http://192.168.0.31/ajax.aspx?bugid=30 elapsed milliseconds:0001
2018-09-20 16:30:41 http://192.168.0.31/ajax.aspx?bugid=30 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 30
2018-09-20 16:30:41 http://192.168.0.31/ajax.aspx?bugid=30 elapsed milliseconds:0000
2018-09-20 16:30:41 http://192.168.0.31/ajax.aspx?bugid=30 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 30
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:30:41 http://192.168.0.31/ajax.aspx?bugid=30 elapsed milliseconds:0001
2018-09-20 16:30:42 http://192.168.0.31/ajax.aspx?bugid=33 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:30:42 http://192.168.0.31/ajax.aspx?bugid=33 elapsed milliseconds:0000
2018-09-20 16:30:42 http://192.168.0.31/ajax.aspx?bugid=33 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 33
2018-09-20 16:30:42 http://192.168.0.31/ajax.aspx?bugid=33 elapsed milliseconds:0001
2018-09-20 16:30:42 http://192.168.0.31/ajax.aspx?bugid=33 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 33
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:30:42 http://192.168.0.31/ajax.aspx?bugid=33 elapsed milliseconds:0005
2018-09-20 16:30:50 http://192.168.0.31/ajax.aspx?bugid=33 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:30:50 http://192.168.0.31/ajax.aspx?bugid=33 elapsed milliseconds:0001
2018-09-20 16:30:50 http://192.168.0.31/ajax.aspx?bugid=33 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 33
2018-09-20 16:30:50 http://192.168.0.31/ajax.aspx?bugid=33 elapsed milliseconds:0000
2018-09-20 16:30:50 http://192.168.0.31/ajax.aspx?bugid=33 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 33
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:30:50 http://192.168.0.31/ajax.aspx?bugid=33 elapsed milliseconds:0000
2018-09-20 16:30:53 http://192.168.0.31/ajax.aspx?bugid=29 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:30:53 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0001
2018-09-20 16:30:53 http://192.168.0.31/ajax.aspx?bugid=29 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 29
2018-09-20 16:30:53 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0000
2018-09-20 16:30:53 http://192.168.0.31/ajax.aspx?bugid=29 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 29
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:30:53 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0000
2018-09-20 16:35:20  caught exception in util.set_context:Request is not available in this context
2018-09-20 16:35:20  threadproc_votes
2018-09-20 16:35:20  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 16:35:20  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 16:35:20  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 16:35:20  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 16:35:20  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 16:35:20  elapsed milliseconds:0002
2018-09-20 16:35:20  elapsed milliseconds:0198
2018-09-20 16:35:20  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 16:35:20  elapsed milliseconds:0011
2018-09-20 16:35:20  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 16:35:20  elapsed milliseconds:0033
2018-09-20 16:35:20  done creating Lucene index
2018-09-20 16:35:26 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:35:26 http://192.168.0.31/bugs.aspx elapsed milliseconds:0073
2018-09-20 16:35:26 http://192.168.0.31/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 16:35:26 http://192.168.0.31/bugs.aspx elapsed milliseconds:0061
2018-09-20 16:35:26 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 16:35:26 http://192.168.0.31/bugs.aspx elapsed milliseconds:0027
2018-09-20 16:35:26 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-09-20 16:35:26 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 16:35:26 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 16:35:26 http://192.168.0.31/bugs.aspx elapsed milliseconds:0013
2018-09-20 16:36:12  caught exception in util.set_context:Request is not available in this context
2018-09-20 16:36:12  threadproc_votes
2018-09-20 16:36:12  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 16:36:12  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 16:36:12  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 16:36:13  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 16:36:13  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 16:36:13  elapsed milliseconds:0002
2018-09-20 16:36:13  elapsed milliseconds:0073
2018-09-20 16:36:13  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 16:36:13  elapsed milliseconds:0039
2018-09-20 16:36:13  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 16:36:13  elapsed milliseconds:0003
2018-09-20 16:36:13  done creating Lucene index
2018-09-20 16:36:15 http://192.168.0.31/ajax.aspx?bugid=25 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:36:15 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:36:15 http://192.168.0.31/ajax.aspx?bugid=25 elapsed milliseconds:0041
2018-09-20 16:36:15 http://192.168.0.31/bugs.aspx elapsed milliseconds:0037
2018-09-20 16:36:15 http://192.168.0.31/ajax.aspx?bugid=25 sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 16:36:15 http://192.168.0.31/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 16:36:15 http://192.168.0.31/bugs.aspx elapsed milliseconds:0041
2018-09-20 16:36:15 http://192.168.0.31/ajax.aspx?bugid=25 elapsed milliseconds:0041
2018-09-20 16:36:15 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 16:36:15 http://192.168.0.31/ajax.aspx?bugid=25 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 25
2018-09-20 16:36:15 http://192.168.0.31/ajax.aspx?bugid=25 elapsed milliseconds:0001
2018-09-20 16:36:15 http://192.168.0.31/ajax.aspx?bugid=25 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 25
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:36:15 http://192.168.0.31/ajax.aspx?bugid=25 elapsed milliseconds:0005
2018-09-20 16:36:15 http://192.168.0.31/bugs.aspx elapsed milliseconds:0017
2018-09-20 16:36:15 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-09-20 16:36:15 http://192.168.0.31/bugs.aspx elapsed milliseconds:0018
2018-09-20 16:36:15 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 16:36:15 http://192.168.0.31/bugs.aspx elapsed milliseconds:0013
2018-09-20 16:36:58 http://192.168.0.31/ajax.aspx?bugid=25 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:36:58 http://192.168.0.31/ajax.aspx?bugid=25 elapsed milliseconds:0001
2018-09-20 16:36:58 http://192.168.0.31/ajax.aspx?bugid=25 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 25
2018-09-20 16:36:58 http://192.168.0.31/ajax.aspx?bugid=25 elapsed milliseconds:0000
2018-09-20 16:36:58 http://192.168.0.31/ajax.aspx?bugid=25 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 25
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:36:58 http://192.168.0.31/ajax.aspx?bugid=25 elapsed milliseconds:0000
2018-09-20 16:38:07 http://192.168.0.31/ajax.aspx?bugid=26 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:38:07 http://192.168.0.31/ajax.aspx?bugid=26 elapsed milliseconds:0001
2018-09-20 16:38:07 http://192.168.0.31/ajax.aspx?bugid=26 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 26
2018-09-20 16:38:07 http://192.168.0.31/ajax.aspx?bugid=26 elapsed milliseconds:0007
2018-09-20 16:38:07 http://192.168.0.31/ajax.aspx?bugid=26 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 26
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:38:08 http://192.168.0.31/ajax.aspx?bugid=26 elapsed milliseconds:0015
2018-09-20 16:38:09 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:38:09 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 16:38:09 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 16:38:09 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 16:38:09 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-09-20 16:38:09 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 16:38:09 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 16:38:10 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:38:10 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 16:38:10 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 16:38:10 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 16:38:10 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-09-20 16:38:10 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 16:38:10 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 16:38:11 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:38:11 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 16:38:11 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 16:38:11 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 16:38:11 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-09-20 16:38:11 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 16:38:11 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 16:40:15 http://192.168.0.31/ajax.aspx?bugid=33 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:40:15 http://192.168.0.31/ajax.aspx?bugid=33 elapsed milliseconds:0001
2018-09-20 16:40:15 http://192.168.0.31/ajax.aspx?bugid=33 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 33
2018-09-20 16:40:15 http://192.168.0.31/ajax.aspx?bugid=33 elapsed milliseconds:0007
2018-09-20 16:40:15 http://192.168.0.31/ajax.aspx?bugid=33 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 33
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:40:15 http://192.168.0.31/ajax.aspx?bugid=33 elapsed milliseconds:0020
2018-09-20 16:40:16 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:40:16 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 16:40:16 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 16:40:16 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 16:40:16 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-09-20 16:40:16 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 16:40:16 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 16:40:17 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:40:17 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 16:40:17 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 16:40:17 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 16:40:17 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-09-20 16:40:17 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 16:40:17 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 16:40:18 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:40:18 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 16:40:18 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 16:40:18 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 16:40:18 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-09-20 16:40:18 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 16:40:18 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 16:41:04 http://192.168.0.31/ajax.aspx?bugid=25 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:41:04 http://192.168.0.31/ajax.aspx?bugid=25 elapsed milliseconds:0001
2018-09-20 16:41:04 http://192.168.0.31/ajax.aspx?bugid=25 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 25
2018-09-20 16:41:04 http://192.168.0.31/ajax.aspx?bugid=25 elapsed milliseconds:0000
2018-09-20 16:41:04 http://192.168.0.31/ajax.aspx?bugid=25 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 25
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:41:04 http://192.168.0.31/ajax.aspx?bugid=25 elapsed milliseconds:0001
2018-09-20 16:41:05 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:41:05 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 16:41:05 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 16:41:05 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 16:41:05 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-09-20 16:41:05 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 16:41:05 http://192.168.0.31/bugs.aspx elapsed milliseconds:0003
2018-09-20 16:41:06 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:41:06 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 16:41:06 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 16:41:06 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 16:41:06 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-09-20 16:41:06 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 16:41:06 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 16:45:15 http://192.168.0.31/ajax.aspx?bugid=35 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:45:15 http://192.168.0.31/ajax.aspx?bugid=35 elapsed milliseconds:0001
2018-09-20 16:45:15 http://192.168.0.31/ajax.aspx?bugid=35 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 35
2018-09-20 16:45:15 http://192.168.0.31/ajax.aspx?bugid=35 elapsed milliseconds:0005
2018-09-20 16:45:15 http://192.168.0.31/ajax.aspx?bugid=35 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 35
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:45:15 http://192.168.0.31/ajax.aspx?bugid=35 elapsed milliseconds:0015
2018-09-20 16:45:41 http://192.168.0.31/ajax.aspx?bugid=32 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:45:41 http://192.168.0.31/ajax.aspx?bugid=32 elapsed milliseconds:0000
2018-09-20 16:45:41 http://192.168.0.31/ajax.aspx?bugid=32 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 32
2018-09-20 16:45:41 http://192.168.0.31/ajax.aspx?bugid=32 elapsed milliseconds:0002
2018-09-20 16:45:41 http://192.168.0.31/ajax.aspx?bugid=32 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 32
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:45:41 http://192.168.0.31/ajax.aspx?bugid=32 elapsed milliseconds:0006
2018-09-20 16:45:41 http://192.168.0.31/ajax.aspx?bugid=29 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:45:41 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0001
2018-09-20 16:45:41 http://192.168.0.31/ajax.aspx?bugid=29 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 29
2018-09-20 16:45:41 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0007
2018-09-20 16:45:41 http://192.168.0.31/ajax.aspx?bugid=29 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 29
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:45:41 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0011
2018-09-20 16:45:42 http://192.168.0.31/ajax.aspx?bugid=29 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:45:42 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0001
2018-09-20 16:45:42 http://192.168.0.31/ajax.aspx?bugid=29 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 29
2018-09-20 16:45:42 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0000
2018-09-20 16:45:42 http://192.168.0.31/ajax.aspx?bugid=29 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 29
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:45:42 http://192.168.0.31/ajax.aspx?bugid=29 elapsed milliseconds:0000
2018-09-20 16:49:14 http://192.168.0.31/ajax.aspx?bugid=30 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:49:14 http://192.168.0.31/ajax.aspx?bugid=30 elapsed milliseconds:0135
2018-09-20 16:49:14 http://192.168.0.31/ajax.aspx?bugid=30 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 30
2018-09-20 16:49:14 http://192.168.0.31/ajax.aspx?bugid=30 elapsed milliseconds:0004
2018-09-20 16:49:14 http://192.168.0.31/ajax.aspx?bugid=30 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 30
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:49:14 http://192.168.0.31/ajax.aspx?bugid=30 elapsed milliseconds:0047
2018-09-20 16:51:18  caught exception in util.set_context:Request is not available in this context
2018-09-20 16:51:18  threadproc_votes
2018-09-20 16:51:18  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 16:51:18  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 16:51:18  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 16:51:18  elapsed milliseconds:0021
2018-09-20 16:51:18  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 16:51:18  elapsed milliseconds:0001
2018-09-20 16:51:18  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 16:51:18  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 16:51:18  elapsed milliseconds:0001
2018-09-20 16:51:18  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 16:51:18  elapsed milliseconds:0002
2018-09-20 16:51:18  done creating Lucene index
2018-09-20 16:51:21 http://192.168.0.31/ajax.aspx?bugid=35 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:51:21 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:51:21 http://192.168.0.31/ajax.aspx?bugid=35 elapsed milliseconds:0135
2018-09-20 16:51:21 http://192.168.0.31/bugs.aspx elapsed milliseconds:0130
2018-09-20 16:51:21 http://192.168.0.31/ajax.aspx?bugid=35 sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 16:51:21 http://192.168.0.31/bugs.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 16:51:21 http://192.168.0.31/ajax.aspx?bugid=35 elapsed milliseconds:0057
2018-09-20 16:51:21 http://192.168.0.31/ajax.aspx?bugid=35 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 35
2018-09-20 16:51:21 http://192.168.0.31/ajax.aspx?bugid=35 elapsed milliseconds:0001
2018-09-20 16:51:21 http://192.168.0.31/ajax.aspx?bugid=35 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 35
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 16:51:21 http://192.168.0.31/ajax.aspx?bugid=35 elapsed milliseconds:0005
2018-09-20 16:51:21 http://192.168.0.31/bugs.aspx elapsed milliseconds:0124
2018-09-20 16:51:21 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 16:51:21 http://192.168.0.31/bugs.aspx elapsed milliseconds:0028
2018-09-20 16:51:21 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-09-20 16:51:21 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 16:51:21 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 16:51:21 http://192.168.0.31/bugs.aspx elapsed milliseconds:0014
2018-09-20 16:57:16 http://192.168.0.31/edit_self.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 16:57:16 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0000
2018-09-20 16:57:16 http://192.168.0.31/edit_self.aspx sql=
declare @org int
			select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = @org
			order by qu_desc
2018-09-20 16:57:16 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0001
2018-09-20 16:57:16 http://192.168.0.31/edit_self.aspx sql=
select pj_id, pj_name, isnull(pu_auto_subscribe,0) [pu_auto_subscribe]
			from projects
			left outer join project_user_xref on pj_id = pu_project and 1 = pu_user
			where isnull(pu_permission_level,2) <> 0
			order by pj_name
2018-09-20 16:57:16 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0012
2018-09-20 16:57:16 http://192.168.0.31/edit_self.aspx sql=
select
			us_username [username],
			isnull(us_firstname,'') [firstname],
			isnull(us_lastname,'') [lastname],
			isnull(us_bugs_per_page,10) [us_bugs_per_page],
			us_use_fckeditor,
			us_enable_bug_list_popups,
			isnull(us_email,'') [email],
			us_enable_notifications,
			us_send_notifications_to_self,
            us_reported_notifications,
            us_assigned_notifications,
            us_subscribed_notifications,
			us_auto_subscribe,
			us_auto_subscribe_own_bugs,
			us_auto_subscribe_reported_bugs,
			us_default_query,
			isnull(us_signature,'') [signature]
			from users
			where us_id = 1
2018-09-20 16:57:16 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0002
2018-09-20 17:01:24  caught exception in util.set_context:Request is not available in this context
2018-09-20 17:01:24  threadproc_votes
2018-09-20 17:01:24  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 17:01:24  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 17:01:24  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 17:01:24  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 17:01:24  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 17:01:24  elapsed milliseconds:0002
2018-09-20 17:01:24  elapsed milliseconds:0041
2018-09-20 17:01:24  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 17:01:24  elapsed milliseconds:0031
2018-09-20 17:01:24  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 17:01:24  elapsed milliseconds:0003
2018-09-20 17:01:24  done creating Lucene index
2018-09-20 17:01:27 http://192.168.0.31/edit_self.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 17:01:27 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0033
2018-09-20 17:01:27 http://192.168.0.31/edit_self.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 17:01:27 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0080
2018-09-20 17:01:27 http://192.168.0.31/edit_self.aspx sql=
declare @org int
			select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = @org
			order by qu_desc
2018-09-20 17:01:27 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0002
2018-09-20 17:01:27 http://192.168.0.31/edit_self.aspx sql=
select pj_id, pj_name, isnull(pu_auto_subscribe,0) [pu_auto_subscribe]
			from projects
			left outer join project_user_xref on pj_id = pu_project and 1 = pu_user
			where isnull(pu_permission_level,2) <> 0
			order by pj_name
2018-09-20 17:01:27 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0002
2018-09-20 17:01:27 http://192.168.0.31/edit_self.aspx sql=
select
			us_username [username],
			isnull(us_firstname,'') [firstname],
			isnull(us_lastname,'') [lastname],
			isnull(us_bugs_per_page,10) [us_bugs_per_page],
			us_use_fckeditor,
			us_enable_bug_list_popups,
			isnull(us_email,'') [email],
			us_enable_notifications,
			us_send_notifications_to_self,
            us_reported_notifications,
            us_assigned_notifications,
            us_subscribed_notifications,
			us_auto_subscribe,
			us_auto_subscribe_own_bugs,
			us_auto_subscribe_reported_bugs,
			us_default_query,
			isnull(us_signature,'') [signature]
			from users
			where us_id = 1
2018-09-20 17:01:27 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0001
2018-09-20 17:02:18  caught exception in util.set_context:Request is not available in this context
2018-09-20 17:02:18  threadproc_votes
2018-09-20 17:02:18  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 17:02:18  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 17:02:18  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 17:02:18  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 17:02:18  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 17:02:18  elapsed milliseconds:0001
2018-09-20 17:02:18  elapsed milliseconds:0082
2018-09-20 17:02:18  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 17:02:18  elapsed milliseconds:0036
2018-09-20 17:02:18  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 17:02:18  elapsed milliseconds:0020
2018-09-20 17:02:18  done creating Lucene index
2018-09-20 17:02:21 http://192.168.0.31/edit_self.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 17:02:21 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0040
2018-09-20 17:02:21 http://192.168.0.31/edit_self.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 17:02:21 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0375
2018-09-20 17:02:21 http://192.168.0.31/edit_self.aspx sql=
declare @org int
			select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = @org
			order by qu_desc
2018-09-20 17:02:21 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0018
2018-09-20 17:02:21 http://192.168.0.31/edit_self.aspx sql=
select pj_id, pj_name, isnull(pu_auto_subscribe,0) [pu_auto_subscribe]
			from projects
			left outer join project_user_xref on pj_id = pu_project and 1 = pu_user
			where isnull(pu_permission_level,2) <> 0
			order by pj_name
2018-09-20 17:02:21 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0004
2018-09-20 17:02:21 http://192.168.0.31/edit_self.aspx sql=
select
			us_username [username],
			isnull(us_firstname,'') [firstname],
			isnull(us_lastname,'') [lastname],
			isnull(us_bugs_per_page,10) [us_bugs_per_page],
			us_use_fckeditor,
			us_enable_bug_list_popups,
			isnull(us_email,'') [email],
			us_enable_notifications,
			us_send_notifications_to_self,
            us_reported_notifications,
            us_assigned_notifications,
            us_subscribed_notifications,
			us_auto_subscribe,
			us_auto_subscribe_own_bugs,
			us_auto_subscribe_reported_bugs,
			us_default_query,
			isnull(us_signature,'') [signature]
			from users
			where us_id = 1
2018-09-20 17:02:21 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0001
2018-09-20 17:03:08  caught exception in util.set_context:Request is not available in this context
2018-09-20 17:03:08  threadproc_votes
2018-09-20 17:03:08  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 17:03:08  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 17:03:08  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 17:03:08  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 17:03:08  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 17:03:08  elapsed milliseconds:0001
2018-09-20 17:03:08  elapsed milliseconds:0093
2018-09-20 17:03:08  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 17:03:08  elapsed milliseconds:0025
2018-09-20 17:03:08  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 17:03:08  elapsed milliseconds:0023
2018-09-20 17:03:08  done creating Lucene index
2018-09-20 17:03:11 http://192.168.0.31/edit_self.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 17:03:11 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0052
2018-09-20 17:03:11 http://192.168.0.31/edit_self.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 17:03:11 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0142
2018-09-20 17:03:11 http://192.168.0.31/edit_self.aspx sql=
declare @org int
			select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = @org
			order by qu_desc
2018-09-20 17:03:11 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0020
2018-09-20 17:03:11 http://192.168.0.31/edit_self.aspx sql=
select pj_id, pj_name, isnull(pu_auto_subscribe,0) [pu_auto_subscribe]
			from projects
			left outer join project_user_xref on pj_id = pu_project and 1 = pu_user
			where isnull(pu_permission_level,2) <> 0
			order by pj_name
2018-09-20 17:03:11 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0005
2018-09-20 17:03:11 http://192.168.0.31/edit_self.aspx sql=
select
			us_username [username],
			isnull(us_firstname,'') [firstname],
			isnull(us_lastname,'') [lastname],
			isnull(us_bugs_per_page,10) [us_bugs_per_page],
			us_use_fckeditor,
			us_enable_bug_list_popups,
			isnull(us_email,'') [email],
			us_enable_notifications,
			us_send_notifications_to_self,
            us_reported_notifications,
            us_assigned_notifications,
            us_subscribed_notifications,
			us_auto_subscribe,
			us_auto_subscribe_own_bugs,
			us_auto_subscribe_reported_bugs,
			us_default_query,
			isnull(us_signature,'') [signature]
			from users
			where us_id = 1
2018-09-20 17:03:11 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0003
2018-09-20 17:03:12 http://192.168.0.31/edit_self.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 17:03:12 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0000
2018-09-20 17:03:12 http://192.168.0.31/edit_self.aspx sql=
declare @org int
			select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = @org
			order by qu_desc
2018-09-20 17:03:12 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0000
2018-09-20 17:03:12 http://192.168.0.31/edit_self.aspx sql=
select pj_id, pj_name, isnull(pu_auto_subscribe,0) [pu_auto_subscribe]
			from projects
			left outer join project_user_xref on pj_id = pu_project and 1 = pu_user
			where isnull(pu_permission_level,2) <> 0
			order by pj_name
2018-09-20 17:03:12 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0000
2018-09-20 17:03:12 http://192.168.0.31/edit_self.aspx sql=
select
			us_username [username],
			isnull(us_firstname,'') [firstname],
			isnull(us_lastname,'') [lastname],
			isnull(us_bugs_per_page,10) [us_bugs_per_page],
			us_use_fckeditor,
			us_enable_bug_list_popups,
			isnull(us_email,'') [email],
			us_enable_notifications,
			us_send_notifications_to_self,
            us_reported_notifications,
            us_assigned_notifications,
            us_subscribed_notifications,
			us_auto_subscribe,
			us_auto_subscribe_own_bugs,
			us_auto_subscribe_reported_bugs,
			us_default_query,
			isnull(us_signature,'') [signature]
			from users
			where us_id = 1
2018-09-20 17:03:12 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0000

TIME: 5:03:18 PM
MSG: A potentially dangerous Request.Path value was detected from the client (:).
URL: http://192.168.0.31/:www.tdssinc.com/contact
EXCEPTION: System.Web.HttpException (0x80004005): A potentially dangerous Request.Path value was detected from the client (:).
   at System.Web.HttpRequest.ValidateInputIfRequiredByConfig()
   at System.Web.HttpApplication.PipelineStepManager.ValidateHelper(HttpContext context)

ALL_HTTP=HTTP_CONNECTION:Keep-Alive
HTTP_ACCEPT:text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING:gzip, deflate
HTTP_ACCEPT_LANGUAGE:en-US
HTTP_COOKIE:se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST:192.168.0.31
HTTP_REFERER:http://192.168.0.31/edit_self.aspx
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT:1

ALL_RAW=Connection: Keep-Alive
Accept: text/html, application/xhtml+xml, */*
Accept-Encoding: gzip, deflate
Accept-Language: en-US
Cookie: se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
Host: 192.168.0.31
Referer: http://192.168.0.31/edit_self.aspx
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
DNT: 1

APPL_MD_PATH=/LM/W3SVC/3/ROOT
APPL_PHYSICAL_PATH=C:\btnet\www\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=3
INSTANCE_META_PATH=/LM/W3SVC/3
LOCAL_ADDR=192.168.0.31
PATH_INFO=/:www.tdssinc.com/contact
PATH_TRANSLATED=C:\btnet\www\:www.tdssinc.com\contact
REMOTE_ADDR=192.168.0.31
REMOTE_HOST=192.168.0.31
REMOTE_PORT=9118
REQUEST_METHOD=GET
SCRIPT_NAME=/:www.tdssinc.com/contact
SERVER_NAME=192.168.0.31
SERVER_PORT=80
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/7.5
URL=/:www.tdssinc.com/contact
HTTP_CONNECTION=Keep-Alive
HTTP_ACCEPT=text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING=gzip, deflate
HTTP_ACCEPT_LANGUAGE=en-US
HTTP_COOKIE=se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST=192.168.0.31
HTTP_REFERER=http://192.168.0.31/edit_self.aspx
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT=1
2018-09-20 17:03:18 http://192.168.0.31/:www.tdssinc.com/contact to email addr: admin@example.com
2018-09-20 17:03:18 http://192.168.0.31/:www.tdssinc.com/contact There was a problem sending email.   Check settings in Web.config.
2018-09-20 17:03:18 http://192.168.0.31/:www.tdssinc.com/contact TO:admin@example.com
2018-09-20 17:03:18 http://192.168.0.31/:www.tdssinc.com/contact FROM:errors@example.com
2018-09-20 17:03:18 http://192.168.0.31/:www.tdssinc.com/contact SUBJECT:Error: A potentially dangerous Request.Path value was detected from the client (:).
2018-09-20 17:03:18 http://192.168.0.31/:www.tdssinc.com/contact Could not find a part of the path 'C:\temp\pickup\87e4db75-19bf-4988-8550-d68f18538a35.eml'.
2018-09-20 17:04:21  caught exception in util.set_context:Request is not available in this context
2018-09-20 17:04:21  threadproc_votes
2018-09-20 17:04:21  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 17:04:21  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 17:04:21  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 17:04:21  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 17:04:21  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 17:04:21  elapsed milliseconds:0001
2018-09-20 17:04:21  elapsed milliseconds:0081
2018-09-20 17:04:21  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 17:04:21  elapsed milliseconds:0001
2018-09-20 17:04:21  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 17:04:21  elapsed milliseconds:0318
2018-09-20 17:04:22  done creating Lucene index

TIME: 5:04:22 PM
MSG: A potentially dangerous Request.Path value was detected from the client (:).
URL: http://192.168.0.31/:www.tdssinc.com/contact
EXCEPTION: System.Web.HttpException (0x80004005): A potentially dangerous Request.Path value was detected from the client (:).
   at System.Web.HttpRequest.ValidateInputIfRequiredByConfig()
   at System.Web.HttpApplication.PipelineStepManager.ValidateHelper(HttpContext context)

ALL_HTTP=HTTP_CONNECTION:Keep-Alive
HTTP_ACCEPT:text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING:gzip, deflate
HTTP_ACCEPT_LANGUAGE:en-US
HTTP_COOKIE:se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST:192.168.0.31
HTTP_REFERER:http://192.168.0.31/edit_self.aspx
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT:1

ALL_RAW=Connection: Keep-Alive
Accept: text/html, application/xhtml+xml, */*
Accept-Encoding: gzip, deflate
Accept-Language: en-US
Cookie: se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
Host: 192.168.0.31
Referer: http://192.168.0.31/edit_self.aspx
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
DNT: 1

APPL_MD_PATH=/LM/W3SVC/3/ROOT
APPL_PHYSICAL_PATH=C:\btnet\www\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=3
INSTANCE_META_PATH=/LM/W3SVC/3
LOCAL_ADDR=192.168.0.31
PATH_INFO=/:www.tdssinc.com/contact
PATH_TRANSLATED=C:\btnet\www\:www.tdssinc.com\contact
REMOTE_ADDR=192.168.0.31
REMOTE_HOST=192.168.0.31
REMOTE_PORT=9122
REQUEST_METHOD=GET
SCRIPT_NAME=/:www.tdssinc.com/contact
SERVER_NAME=192.168.0.31
SERVER_PORT=80
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/7.5
URL=/:www.tdssinc.com/contact
HTTP_CONNECTION=Keep-Alive
HTTP_ACCEPT=text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING=gzip, deflate
HTTP_ACCEPT_LANGUAGE=en-US
HTTP_COOKIE=se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST=192.168.0.31
HTTP_REFERER=http://192.168.0.31/edit_self.aspx
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT=1
2018-09-20 17:04:22 http://192.168.0.31/:www.tdssinc.com/contact to email addr: admin@example.com
2018-09-20 17:04:22 http://192.168.0.31/:www.tdssinc.com/contact There was a problem sending email.   Check settings in Web.config.
2018-09-20 17:04:22 http://192.168.0.31/:www.tdssinc.com/contact TO:admin@example.com
2018-09-20 17:04:22 http://192.168.0.31/:www.tdssinc.com/contact FROM:errors@example.com
2018-09-20 17:04:22 http://192.168.0.31/:www.tdssinc.com/contact SUBJECT:Error: A potentially dangerous Request.Path value was detected from the client (:).
2018-09-20 17:04:22 http://192.168.0.31/:www.tdssinc.com/contact Could not find a part of the path 'C:\temp\pickup\554bf2cc-0e2c-4312-9205-13b0fc56ca5c.eml'.
2018-09-20 17:04:24 http://192.168.0.31/edit_self.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 17:04:24 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0037
2018-09-20 17:04:24 http://192.168.0.31/edit_self.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 17:04:24 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0137
2018-09-20 17:04:24 http://192.168.0.31/edit_self.aspx sql=
declare @org int
			select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = @org
			order by qu_desc
2018-09-20 17:04:24 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0018
2018-09-20 17:04:24 http://192.168.0.31/edit_self.aspx sql=
select pj_id, pj_name, isnull(pu_auto_subscribe,0) [pu_auto_subscribe]
			from projects
			left outer join project_user_xref on pj_id = pu_project and 1 = pu_user
			where isnull(pu_permission_level,2) <> 0
			order by pj_name
2018-09-20 17:04:24 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0012
2018-09-20 17:04:24 http://192.168.0.31/edit_self.aspx sql=
select
			us_username [username],
			isnull(us_firstname,'') [firstname],
			isnull(us_lastname,'') [lastname],
			isnull(us_bugs_per_page,10) [us_bugs_per_page],
			us_use_fckeditor,
			us_enable_bug_list_popups,
			isnull(us_email,'') [email],
			us_enable_notifications,
			us_send_notifications_to_self,
            us_reported_notifications,
            us_assigned_notifications,
            us_subscribed_notifications,
			us_auto_subscribe,
			us_auto_subscribe_own_bugs,
			us_auto_subscribe_reported_bugs,
			us_default_query,
			isnull(us_signature,'') [signature]
			from users
			where us_id = 1
2018-09-20 17:04:24 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0001
2018-09-20 17:04:39  caught exception in util.set_context:Request is not available in this context
2018-09-20 17:04:39  threadproc_votes
2018-09-20 17:04:39  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 17:04:39  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index

TIME: 5:04:39 PM
MSG: A potentially dangerous Request.Path value was detected from the client (:).
URL: http://192.168.0.31/:www.tdssinc.com/contact
EXCEPTION: System.Web.HttpException (0x80004005): A potentially dangerous Request.Path value was detected from the client (:).
   at System.Web.HttpRequest.ValidateInputIfRequiredByConfig()
   at System.Web.HttpApplication.PipelineStepManager.ValidateHelper(HttpContext context)

ALL_HTTP=HTTP_CONNECTION:Keep-Alive
HTTP_ACCEPT:text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING:gzip, deflate
HTTP_ACCEPT_LANGUAGE:en-US
HTTP_COOKIE:se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST:192.168.0.31
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT:1

ALL_RAW=Connection: Keep-Alive
Accept: text/html, application/xhtml+xml, */*
Accept-Encoding: gzip, deflate
Accept-Language: en-US
Cookie: se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
Host: 192.168.0.31
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
DNT: 1

APPL_MD_PATH=/LM/W3SVC/3/ROOT
APPL_PHYSICAL_PATH=C:\btnet\www\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=3
INSTANCE_META_PATH=/LM/W3SVC/3
LOCAL_ADDR=192.168.0.31
PATH_INFO=/:www.tdssinc.com/contact
PATH_TRANSLATED=C:\btnet\www\:www.tdssinc.com\contact
REMOTE_ADDR=192.168.0.31
REMOTE_HOST=192.168.0.31
REMOTE_PORT=9123
REQUEST_METHOD=GET
SCRIPT_NAME=/:www.tdssinc.com/contact
SERVER_NAME=192.168.0.31
SERVER_PORT=80
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/7.5
URL=/:www.tdssinc.com/contact
HTTP_CONNECTION=Keep-Alive
HTTP_ACCEPT=text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING=gzip, deflate
HTTP_ACCEPT_LANGUAGE=en-US
HTTP_COOKIE=se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST=192.168.0.31
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT=1
2018-09-20 17:04:39 http://192.168.0.31/:www.tdssinc.com/contact to email addr: admin@example.com
2018-09-20 17:04:39 http://192.168.0.31/:www.tdssinc.com/contact There was a problem sending email.   Check settings in Web.config.
2018-09-20 17:04:39 http://192.168.0.31/:www.tdssinc.com/contact TO:admin@example.com
2018-09-20 17:04:39 http://192.168.0.31/:www.tdssinc.com/contact FROM:errors@example.com
2018-09-20 17:04:39 http://192.168.0.31/:www.tdssinc.com/contact SUBJECT:Error: A potentially dangerous Request.Path value was detected from the client (:).
2018-09-20 17:04:39 http://192.168.0.31/:www.tdssinc.com/contact Could not find a part of the path 'C:\temp\pickup\d604b53e-e0e1-4c6e-927f-c03bf7d999db.eml'.
2018-09-20 17:04:39  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 17:04:39  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 17:04:39  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 17:04:39  elapsed milliseconds:0001
2018-09-20 17:04:39  elapsed milliseconds:0049
2018-09-20 17:04:39  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 17:04:39  elapsed milliseconds:0001
2018-09-20 17:04:39  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 17:04:39  elapsed milliseconds:0004
2018-09-20 17:04:39  done creating Lucene index

TIME: 5:04:42 PM
MSG: A potentially dangerous Request.Path value was detected from the client (:).
URL: http://192.168.0.31/:www.tdssinc.com/contact
EXCEPTION: System.Web.HttpException (0x80004005): A potentially dangerous Request.Path value was detected from the client (:).
   at System.Web.HttpRequest.ValidateInputIfRequiredByConfig()
   at System.Web.HttpApplication.PipelineStepManager.ValidateHelper(HttpContext context)

ALL_HTTP=HTTP_CONNECTION:Keep-Alive
HTTP_ACCEPT:text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING:gzip, deflate
HTTP_ACCEPT_LANGUAGE:en-US
HTTP_COOKIE:se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST:192.168.0.31
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT:1

ALL_RAW=Connection: Keep-Alive
Accept: text/html, application/xhtml+xml, */*
Accept-Encoding: gzip, deflate
Accept-Language: en-US
Cookie: se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
Host: 192.168.0.31
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
DNT: 1

APPL_MD_PATH=/LM/W3SVC/3/ROOT
APPL_PHYSICAL_PATH=C:\btnet\www\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=3
INSTANCE_META_PATH=/LM/W3SVC/3
LOCAL_ADDR=192.168.0.31
PATH_INFO=/:www.tdssinc.com/contact
PATH_TRANSLATED=C:\btnet\www\:www.tdssinc.com\contact
REMOTE_ADDR=192.168.0.31
REMOTE_HOST=192.168.0.31
REMOTE_PORT=9123
REQUEST_METHOD=GET
SCRIPT_NAME=/:www.tdssinc.com/contact
SERVER_NAME=192.168.0.31
SERVER_PORT=80
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/7.5
URL=/:www.tdssinc.com/contact
HTTP_CONNECTION=Keep-Alive
HTTP_ACCEPT=text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING=gzip, deflate
HTTP_ACCEPT_LANGUAGE=en-US
HTTP_COOKIE=se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST=192.168.0.31
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT=1
2018-09-20 17:04:42 http://192.168.0.31/:www.tdssinc.com/contact to email addr: admin@example.com
2018-09-20 17:04:42 http://192.168.0.31/:www.tdssinc.com/contact There was a problem sending email.   Check settings in Web.config.
2018-09-20 17:04:42 http://192.168.0.31/:www.tdssinc.com/contact TO:admin@example.com
2018-09-20 17:04:42 http://192.168.0.31/:www.tdssinc.com/contact FROM:errors@example.com
2018-09-20 17:04:42 http://192.168.0.31/:www.tdssinc.com/contact SUBJECT:Error: A potentially dangerous Request.Path value was detected from the client (:).
2018-09-20 17:04:42 http://192.168.0.31/:www.tdssinc.com/contact Could not find a part of the path 'C:\temp\pickup\e0767b62-2da6-4d17-95d6-111ec45bf8e6.eml'.

TIME: 5:04:47 PM
MSG: A potentially dangerous Request.Path value was detected from the client (:).
URL: http://192.168.0.31/:www.tdssinc.com/contact
EXCEPTION: System.Web.HttpException (0x80004005): A potentially dangerous Request.Path value was detected from the client (:).
   at System.Web.HttpRequest.ValidateInputIfRequiredByConfig()
   at System.Web.HttpApplication.PipelineStepManager.ValidateHelper(HttpContext context)

ALL_HTTP=HTTP_CONNECTION:Keep-Alive
HTTP_ACCEPT:text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING:gzip, deflate
HTTP_ACCEPT_LANGUAGE:en-US
HTTP_COOKIE:se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST:192.168.0.31
HTTP_REFERER:http://192.168.0.31/edit_self.aspx
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT:1

ALL_RAW=Connection: Keep-Alive
Accept: text/html, application/xhtml+xml, */*
Accept-Encoding: gzip, deflate
Accept-Language: en-US
Cookie: se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
Host: 192.168.0.31
Referer: http://192.168.0.31/edit_self.aspx
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
DNT: 1

APPL_MD_PATH=/LM/W3SVC/3/ROOT
APPL_PHYSICAL_PATH=C:\btnet\www\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=3
INSTANCE_META_PATH=/LM/W3SVC/3
LOCAL_ADDR=192.168.0.31
PATH_INFO=/:www.tdssinc.com/contact
PATH_TRANSLATED=C:\btnet\www\:www.tdssinc.com\contact
REMOTE_ADDR=192.168.0.31
REMOTE_HOST=192.168.0.31
REMOTE_PORT=9123
REQUEST_METHOD=GET
SCRIPT_NAME=/:www.tdssinc.com/contact
SERVER_NAME=192.168.0.31
SERVER_PORT=80
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/7.5
URL=/:www.tdssinc.com/contact
HTTP_CONNECTION=Keep-Alive
HTTP_ACCEPT=text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING=gzip, deflate
HTTP_ACCEPT_LANGUAGE=en-US
HTTP_COOKIE=se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST=192.168.0.31
HTTP_REFERER=http://192.168.0.31/edit_self.aspx
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT=1
2018-09-20 17:04:47 http://192.168.0.31/:www.tdssinc.com/contact to email addr: admin@example.com
2018-09-20 17:04:47 http://192.168.0.31/:www.tdssinc.com/contact There was a problem sending email.   Check settings in Web.config.
2018-09-20 17:04:47 http://192.168.0.31/:www.tdssinc.com/contact TO:admin@example.com
2018-09-20 17:04:47 http://192.168.0.31/:www.tdssinc.com/contact FROM:errors@example.com
2018-09-20 17:04:47 http://192.168.0.31/:www.tdssinc.com/contact SUBJECT:Error: A potentially dangerous Request.Path value was detected from the client (:).
2018-09-20 17:04:47 http://192.168.0.31/:www.tdssinc.com/contact Could not find a part of the path 'C:\temp\pickup\2e8a339a-5e01-4b32-a5a1-616acc2de75d.eml'.
2018-09-20 17:05:12  caught exception in util.set_context:Request is not available in this context
2018-09-20 17:05:12  threadproc_votes
2018-09-20 17:05:12  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 17:05:12  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index

TIME: 5:05:12 PM
MSG: A potentially dangerous Request.Path value was detected from the client (:).
URL: http://192.168.0.31/:www.tdssinc.com/contact
EXCEPTION: System.Web.HttpException (0x80004005): A potentially dangerous Request.Path value was detected from the client (:).
   at System.Web.HttpRequest.ValidateInputIfRequiredByConfig()
   at System.Web.HttpApplication.PipelineStepManager.ValidateHelper(HttpContext context)

ALL_HTTP=HTTP_CONNECTION:Keep-Alive
HTTP_ACCEPT:text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING:gzip, deflate
HTTP_ACCEPT_LANGUAGE:en-US
HTTP_COOKIE:se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST:192.168.0.31
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT:1

ALL_RAW=Connection: Keep-Alive
Accept: text/html, application/xhtml+xml, */*
Accept-Encoding: gzip, deflate
Accept-Language: en-US
Cookie: se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
Host: 192.168.0.31
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
DNT: 1

APPL_MD_PATH=/LM/W3SVC/3/ROOT
APPL_PHYSICAL_PATH=C:\btnet\www\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=3
INSTANCE_META_PATH=/LM/W3SVC/3
LOCAL_ADDR=192.168.0.31
PATH_INFO=/:www.tdssinc.com/contact
PATH_TRANSLATED=C:\btnet\www\:www.tdssinc.com\contact
REMOTE_ADDR=192.168.0.31
REMOTE_HOST=192.168.0.31
REMOTE_PORT=9123
REQUEST_METHOD=GET
SCRIPT_NAME=/:www.tdssinc.com/contact
SERVER_NAME=192.168.0.31
SERVER_PORT=80
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/7.5
URL=/:www.tdssinc.com/contact
HTTP_CONNECTION=Keep-Alive
HTTP_ACCEPT=text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING=gzip, deflate
HTTP_ACCEPT_LANGUAGE=en-US
HTTP_COOKIE=se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST=192.168.0.31
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT=1
2018-09-20 17:05:12 http://192.168.0.31/:www.tdssinc.com/contact to email addr: admin@example.com
2018-09-20 17:05:12 http://192.168.0.31/:www.tdssinc.com/contact There was a problem sending email.   Check settings in Web.config.
2018-09-20 17:05:12 http://192.168.0.31/:www.tdssinc.com/contact TO:admin@example.com
2018-09-20 17:05:12 http://192.168.0.31/:www.tdssinc.com/contact FROM:errors@example.com
2018-09-20 17:05:12 http://192.168.0.31/:www.tdssinc.com/contact SUBJECT:Error: A potentially dangerous Request.Path value was detected from the client (:).
2018-09-20 17:05:12 http://192.168.0.31/:www.tdssinc.com/contact Could not find a part of the path 'C:\temp\pickup\f806293b-3327-475d-9d05-e5e80ff171ec.eml'.
2018-09-20 17:05:12  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 17:05:12  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 17:05:12  elapsed milliseconds:0107
2018-09-20 17:05:12  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 17:05:12  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 17:05:12  elapsed milliseconds:0001
2018-09-20 17:05:12  elapsed milliseconds:0001
2018-09-20 17:05:12  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 17:05:12  elapsed milliseconds:0003
2018-09-20 17:05:12  done creating Lucene index

TIME: 5:05:17 PM
MSG: A potentially dangerous Request.Path value was detected from the client (:).
URL: http://192.168.0.31/:www.tdssinc.com/contact
EXCEPTION: System.Web.HttpException (0x80004005): A potentially dangerous Request.Path value was detected from the client (:).
   at System.Web.HttpRequest.ValidateInputIfRequiredByConfig()
   at System.Web.HttpApplication.PipelineStepManager.ValidateHelper(HttpContext context)

ALL_HTTP=HTTP_CONNECTION:Keep-Alive
HTTP_ACCEPT:text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING:gzip, deflate
HTTP_ACCEPT_LANGUAGE:en-US
HTTP_COOKIE:se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST:192.168.0.31
HTTP_REFERER:http://192.168.0.31/edit_self.aspx
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT:1

ALL_RAW=Connection: Keep-Alive
Accept: text/html, application/xhtml+xml, */*
Accept-Encoding: gzip, deflate
Accept-Language: en-US
Cookie: se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
Host: 192.168.0.31
Referer: http://192.168.0.31/edit_self.aspx
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
DNT: 1

APPL_MD_PATH=/LM/W3SVC/3/ROOT
APPL_PHYSICAL_PATH=C:\btnet\www\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=3
INSTANCE_META_PATH=/LM/W3SVC/3
LOCAL_ADDR=192.168.0.31
PATH_INFO=/:www.tdssinc.com/contact
PATH_TRANSLATED=C:\btnet\www\:www.tdssinc.com\contact
REMOTE_ADDR=192.168.0.31
REMOTE_HOST=192.168.0.31
REMOTE_PORT=9123
REQUEST_METHOD=GET
SCRIPT_NAME=/:www.tdssinc.com/contact
SERVER_NAME=192.168.0.31
SERVER_PORT=80
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/7.5
URL=/:www.tdssinc.com/contact
HTTP_CONNECTION=Keep-Alive
HTTP_ACCEPT=text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING=gzip, deflate
HTTP_ACCEPT_LANGUAGE=en-US
HTTP_COOKIE=se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST=192.168.0.31
HTTP_REFERER=http://192.168.0.31/edit_self.aspx
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT=1
2018-09-20 17:05:17 http://192.168.0.31/:www.tdssinc.com/contact to email addr: admin@example.com
2018-09-20 17:05:17 http://192.168.0.31/:www.tdssinc.com/contact There was a problem sending email.   Check settings in Web.config.
2018-09-20 17:05:17 http://192.168.0.31/:www.tdssinc.com/contact TO:admin@example.com
2018-09-20 17:05:17 http://192.168.0.31/:www.tdssinc.com/contact FROM:errors@example.com
2018-09-20 17:05:17 http://192.168.0.31/:www.tdssinc.com/contact SUBJECT:Error: A potentially dangerous Request.Path value was detected from the client (:).
2018-09-20 17:05:17 http://192.168.0.31/:www.tdssinc.com/contact Could not find a part of the path 'C:\temp\pickup\e59a9855-d570-4a63-b0d7-bcd6c18fe75b.eml'.

TIME: 5:05:28 PM
MSG: A potentially dangerous Request.Path value was detected from the client (:).
URL: http://192.168.0.31/:www.tdssinc.com/contact
EXCEPTION: System.Web.HttpException (0x80004005): A potentially dangerous Request.Path value was detected from the client (:).
   at System.Web.HttpRequest.ValidateInputIfRequiredByConfig()
   at System.Web.HttpApplication.PipelineStepManager.ValidateHelper(HttpContext context)

ALL_HTTP=HTTP_CONNECTION:Keep-Alive
HTTP_ACCEPT:text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING:gzip, deflate
HTTP_ACCEPT_LANGUAGE:en-US
HTTP_COOKIE:se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST:192.168.0.31
HTTP_REFERER:http://192.168.0.31/edit_self.aspx
HTTP_USER_AGENT:Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT:1

ALL_RAW=Connection: Keep-Alive
Accept: text/html, application/xhtml+xml, */*
Accept-Encoding: gzip, deflate
Accept-Language: en-US
Cookie: se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
Host: 192.168.0.31
Referer: http://192.168.0.31/edit_self.aspx
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
DNT: 1

APPL_MD_PATH=/LM/W3SVC/3/ROOT
APPL_PHYSICAL_PATH=C:\btnet\www\
CONTENT_LENGTH=0
GATEWAY_INTERFACE=CGI/1.1
HTTPS=off
INSTANCE_ID=3
INSTANCE_META_PATH=/LM/W3SVC/3
LOCAL_ADDR=192.168.0.31
PATH_INFO=/:www.tdssinc.com/contact
PATH_TRANSLATED=C:\btnet\www\:www.tdssinc.com\contact
REMOTE_ADDR=192.168.0.31
REMOTE_HOST=192.168.0.31
REMOTE_PORT=9123
REQUEST_METHOD=GET
SCRIPT_NAME=/:www.tdssinc.com/contact
SERVER_NAME=192.168.0.31
SERVER_PORT=80
SERVER_PORT_SECURE=0
SERVER_PROTOCOL=HTTP/1.1
SERVER_SOFTWARE=Microsoft-IIS/7.5
URL=/:www.tdssinc.com/contact
HTTP_CONNECTION=Keep-Alive
HTTP_ACCEPT=text/html, application/xhtml+xml, */*
HTTP_ACCEPT_ENCODING=gzip, deflate
HTTP_ACCEPT_LANGUAGE=en-US
HTTP_COOKIE=se_id=a65f55d9-194b-4866-b9d3-273d93b759e1; ASP.NET_SessionId=aq5datxp3mufhnrnqjmgec0h; user=name=admin&NTLM=0; hide_inactive_users=0; filter_users=; images_inline=1; history_inline=0
HTTP_HOST=192.168.0.31
HTTP_REFERER=http://192.168.0.31/edit_self.aspx
HTTP_USER_AGENT=Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko
HTTP_DNT=1
2018-09-20 17:05:28 http://192.168.0.31/:www.tdssinc.com/contact to email addr: admin@example.com
2018-09-20 17:05:28 http://192.168.0.31/:www.tdssinc.com/contact There was a problem sending email.   Check settings in Web.config.
2018-09-20 17:05:28 http://192.168.0.31/:www.tdssinc.com/contact TO:admin@example.com
2018-09-20 17:05:28 http://192.168.0.31/:www.tdssinc.com/contact FROM:errors@example.com
2018-09-20 17:05:28 http://192.168.0.31/:www.tdssinc.com/contact SUBJECT:Error: A potentially dangerous Request.Path value was detected from the client (:).
2018-09-20 17:05:28 http://192.168.0.31/:www.tdssinc.com/contact Could not find a part of the path 'C:\temp\pickup\dc15c875-0fd6-4c90-b9c6-1eeb0acd4f85.eml'.
2018-09-20 17:05:54  caught exception in util.set_context:Request is not available in this context
2018-09-20 17:05:54  threadproc_votes
2018-09-20 17:05:54  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 17:05:54  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 17:05:54  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 17:05:54  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 17:05:54  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 17:05:54  elapsed milliseconds:0001
2018-09-20 17:05:54  elapsed milliseconds:0081
2018-09-20 17:05:54  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 17:05:54  elapsed milliseconds:0014
2018-09-20 17:05:54  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 17:05:54  elapsed milliseconds:0044
2018-09-20 17:05:55  done creating Lucene index
2018-09-20 17:05:57 http://192.168.0.31/edit_self.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 17:05:57 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0036
2018-09-20 17:05:57 http://192.168.0.31/edit_self.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 17:05:57 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0038
2018-09-20 17:05:57 http://192.168.0.31/edit_self.aspx sql=
declare @org int
			select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = @org
			order by qu_desc
2018-09-20 17:05:57 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0011
2018-09-20 17:05:57 http://192.168.0.31/edit_self.aspx sql=
select pj_id, pj_name, isnull(pu_auto_subscribe,0) [pu_auto_subscribe]
			from projects
			left outer join project_user_xref on pj_id = pu_project and 1 = pu_user
			where isnull(pu_permission_level,2) <> 0
			order by pj_name
2018-09-20 17:05:57 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0002
2018-09-20 17:05:57 http://192.168.0.31/edit_self.aspx sql=
select
			us_username [username],
			isnull(us_firstname,'') [firstname],
			isnull(us_lastname,'') [lastname],
			isnull(us_bugs_per_page,10) [us_bugs_per_page],
			us_use_fckeditor,
			us_enable_bug_list_popups,
			isnull(us_email,'') [email],
			us_enable_notifications,
			us_send_notifications_to_self,
            us_reported_notifications,
            us_assigned_notifications,
            us_subscribed_notifications,
			us_auto_subscribe,
			us_auto_subscribe_own_bugs,
			us_auto_subscribe_reported_bugs,
			us_default_query,
			isnull(us_signature,'') [signature]
			from users
			where us_id = 1
2018-09-20 17:05:57 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0000
2018-09-20 17:06:34  caught exception in util.set_context:Request is not available in this context
2018-09-20 17:06:34  threadproc_votes
2018-09-20 17:06:34  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 17:06:34  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 17:06:34  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 17:06:34  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 17:06:34  elapsed milliseconds:0059
2018-09-20 17:06:34  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 17:06:34  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 17:06:34  elapsed milliseconds:0001
2018-09-20 17:06:34  elapsed milliseconds:0001
2018-09-20 17:06:34  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 17:06:34  elapsed milliseconds:0002
2018-09-20 17:06:34  done creating Lucene index
2018-09-20 17:06:37 http://192.168.0.31/edit_self.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 17:06:37 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0008
2018-09-20 17:06:37 http://192.168.0.31/edit_self.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 17:06:37 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0170
2018-09-20 17:06:37 http://192.168.0.31/edit_self.aspx sql=
declare @org int
			select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = @org
			order by qu_desc
2018-09-20 17:06:37 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0025
2018-09-20 17:06:37 http://192.168.0.31/edit_self.aspx sql=
select pj_id, pj_name, isnull(pu_auto_subscribe,0) [pu_auto_subscribe]
			from projects
			left outer join project_user_xref on pj_id = pu_project and 1 = pu_user
			where isnull(pu_permission_level,2) <> 0
			order by pj_name
2018-09-20 17:06:37 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0002
2018-09-20 17:06:37 http://192.168.0.31/edit_self.aspx sql=
select
			us_username [username],
			isnull(us_firstname,'') [firstname],
			isnull(us_lastname,'') [lastname],
			isnull(us_bugs_per_page,10) [us_bugs_per_page],
			us_use_fckeditor,
			us_enable_bug_list_popups,
			isnull(us_email,'') [email],
			us_enable_notifications,
			us_send_notifications_to_self,
            us_reported_notifications,
            us_assigned_notifications,
            us_subscribed_notifications,
			us_auto_subscribe,
			us_auto_subscribe_own_bugs,
			us_auto_subscribe_reported_bugs,
			us_default_query,
			isnull(us_signature,'') [signature]
			from users
			where us_id = 1
2018-09-20 17:06:37 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0000
2018-09-20 17:07:14  caught exception in util.set_context:Request is not available in this context
2018-09-20 17:07:14  threadproc_votes
2018-09-20 17:07:14  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 17:07:14  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 17:07:14  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 17:07:14  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 17:07:14  elapsed milliseconds:0070
2018-09-20 17:07:14  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 17:07:14  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 17:07:14  elapsed milliseconds:0001
2018-09-20 17:07:14  elapsed milliseconds:0001
2018-09-20 17:07:14  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 17:07:14  elapsed milliseconds:0003
2018-09-20 17:07:14  done creating Lucene index
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0041
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0044
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0044
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0042
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0042
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx sql=
declare @org int
			select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = @org
			order by qu_desc
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0042
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx sql=
declare @org int
			select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = @org
			order by qu_desc
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx sql=
declare @org int
			select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = @org
			order by qu_desc
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0023
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0022
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx sql=
select pj_id, pj_name, isnull(pu_auto_subscribe,0) [pu_auto_subscribe]
			from projects
			left outer join project_user_xref on pj_id = pu_project and 1 = pu_user
			where isnull(pu_permission_level,2) <> 0
			order by pj_name
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx sql=
select pj_id, pj_name, isnull(pu_auto_subscribe,0) [pu_auto_subscribe]
			from projects
			left outer join project_user_xref on pj_id = pu_project and 1 = pu_user
			where isnull(pu_permission_level,2) <> 0
			order by pj_name
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0022
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx sql=
select pj_id, pj_name, isnull(pu_auto_subscribe,0) [pu_auto_subscribe]
			from projects
			left outer join project_user_xref on pj_id = pu_project and 1 = pu_user
			where isnull(pu_permission_level,2) <> 0
			order by pj_name
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0002
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0002
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx sql=
select
			us_username [username],
			isnull(us_firstname,'') [firstname],
			isnull(us_lastname,'') [lastname],
			isnull(us_bugs_per_page,10) [us_bugs_per_page],
			us_use_fckeditor,
			us_enable_bug_list_popups,
			isnull(us_email,'') [email],
			us_enable_notifications,
			us_send_notifications_to_self,
            us_reported_notifications,
            us_assigned_notifications,
            us_subscribed_notifications,
			us_auto_subscribe,
			us_auto_subscribe_own_bugs,
			us_auto_subscribe_reported_bugs,
			us_default_query,
			isnull(us_signature,'') [signature]
			from users
			where us_id = 1
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx sql=
select
			us_username [username],
			isnull(us_firstname,'') [firstname],
			isnull(us_lastname,'') [lastname],
			isnull(us_bugs_per_page,10) [us_bugs_per_page],
			us_use_fckeditor,
			us_enable_bug_list_popups,
			isnull(us_email,'') [email],
			us_enable_notifications,
			us_send_notifications_to_self,
            us_reported_notifications,
            us_assigned_notifications,
            us_subscribed_notifications,
			us_auto_subscribe,
			us_auto_subscribe_own_bugs,
			us_auto_subscribe_reported_bugs,
			us_default_query,
			isnull(us_signature,'') [signature]
			from users
			where us_id = 1
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0001
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx sql=
select
			us_username [username],
			isnull(us_firstname,'') [firstname],
			isnull(us_lastname,'') [lastname],
			isnull(us_bugs_per_page,10) [us_bugs_per_page],
			us_use_fckeditor,
			us_enable_bug_list_popups,
			isnull(us_email,'') [email],
			us_enable_notifications,
			us_send_notifications_to_self,
            us_reported_notifications,
            us_assigned_notifications,
            us_subscribed_notifications,
			us_auto_subscribe,
			us_auto_subscribe_own_bugs,
			us_auto_subscribe_reported_bugs,
			us_default_query,
			isnull(us_signature,'') [signature]
			from users
			where us_id = 1
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0001
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0000
2018-09-20 17:07:17 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0008
2018-09-20 17:07:18 http://192.168.0.31/edit_self.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 17:07:18 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0000
2018-09-20 17:07:18 http://192.168.0.31/edit_self.aspx sql=
declare @org int
			select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = @org
			order by qu_desc
2018-09-20 17:07:18 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0000
2018-09-20 17:07:18 http://192.168.0.31/edit_self.aspx sql=
select pj_id, pj_name, isnull(pu_auto_subscribe,0) [pu_auto_subscribe]
			from projects
			left outer join project_user_xref on pj_id = pu_project and 1 = pu_user
			where isnull(pu_permission_level,2) <> 0
			order by pj_name
2018-09-20 17:07:18 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0000
2018-09-20 17:07:18 http://192.168.0.31/edit_self.aspx sql=
select
			us_username [username],
			isnull(us_firstname,'') [firstname],
			isnull(us_lastname,'') [lastname],
			isnull(us_bugs_per_page,10) [us_bugs_per_page],
			us_use_fckeditor,
			us_enable_bug_list_popups,
			isnull(us_email,'') [email],
			us_enable_notifications,
			us_send_notifications_to_self,
            us_reported_notifications,
            us_assigned_notifications,
            us_subscribed_notifications,
			us_auto_subscribe,
			us_auto_subscribe_own_bugs,
			us_auto_subscribe_reported_bugs,
			us_default_query,
			isnull(us_signature,'') [signature]
			from users
			where us_id = 1
2018-09-20 17:07:18 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0000
2018-09-20 17:08:13  caught exception in util.set_context:Request is not available in this context
2018-09-20 17:08:13  threadproc_votes
2018-09-20 17:08:13  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 17:08:13  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 17:08:13  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 17:08:13  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 17:08:13  elapsed milliseconds:0104
2018-09-20 17:08:13  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 17:08:13  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 17:08:13  elapsed milliseconds:0001
2018-09-20 17:08:13  elapsed milliseconds:0001
2018-09-20 17:08:13  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 17:08:13  elapsed milliseconds:0004
2018-09-20 17:08:14  done creating Lucene index
2018-09-20 17:08:16 http://192.168.0.31/edit_self.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 17:08:16 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0034
2018-09-20 17:08:16 http://192.168.0.31/edit_self.aspx sql=

/* custom columns */ select sc.name, st.[name] [datatype], 
case when st.[name] = 'nvarchar' or st.[name] = 'nchar' then sc.length/2 else sc.length end as [length], 
sc.xprec, sc.xscale, sc.isnullable,
mm.text [default value], 
dflts.name [default name], 
isnull(ccm_dropdown_type,'') [dropdown type],
isnull(ccm_dropdown_vals,'') [vals],
isnull(ccm_sort_seq, sc.colorder) [column order],
sc.colorder
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
left outer join syscomments mm on sc.cdefault = mm.id
left outer join custom_col_metadata on ccm_colorder = sc.colorder
left outer join sysobjects dflts on dflts.id = mm.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
order by sc.id, isnull(ccm_sort_seq,sc.colorder)
2018-09-20 17:08:16 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0055
2018-09-20 17:08:16 http://192.168.0.31/edit_self.aspx sql=
declare @org int
			select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = @org
			order by qu_desc
2018-09-20 17:08:16 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0026
2018-09-20 17:08:16 http://192.168.0.31/edit_self.aspx sql=
select pj_id, pj_name, isnull(pu_auto_subscribe,0) [pu_auto_subscribe]
			from projects
			left outer join project_user_xref on pj_id = pu_project and 1 = pu_user
			where isnull(pu_permission_level,2) <> 0
			order by pj_name
2018-09-20 17:08:16 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0002
2018-09-20 17:08:16 http://192.168.0.31/edit_self.aspx sql=
select
			us_username [username],
			isnull(us_firstname,'') [firstname],
			isnull(us_lastname,'') [lastname],
			isnull(us_bugs_per_page,10) [us_bugs_per_page],
			us_use_fckeditor,
			us_enable_bug_list_popups,
			isnull(us_email,'') [email],
			us_enable_notifications,
			us_send_notifications_to_self,
            us_reported_notifications,
            us_assigned_notifications,
            us_subscribed_notifications,
			us_auto_subscribe,
			us_auto_subscribe_own_bugs,
			us_auto_subscribe_reported_bugs,
			us_default_query,
			isnull(us_signature,'') [signature]
			from users
			where us_id = 1
2018-09-20 17:08:16 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0001
2018-09-20 17:08:40 http://192.168.0.31/edit_self.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 17:08:40 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0001
2018-09-20 17:08:40 http://192.168.0.31/edit_self.aspx sql=
declare @org int
			select @org = us_org from users where us_id = 1

			select qu_id, qu_desc
			from queries
			where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
			or isnull(qu_user,0) = 1
			or isnull(qu_org,0) = @org
			order by qu_desc
2018-09-20 17:08:40 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0000
2018-09-20 17:08:40 http://192.168.0.31/edit_self.aspx sql=
select pj_id, pj_name, isnull(pu_auto_subscribe,0) [pu_auto_subscribe]
			from projects
			left outer join project_user_xref on pj_id = pu_project and 1 = pu_user
			where isnull(pu_permission_level,2) <> 0
			order by pj_name
2018-09-20 17:08:40 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0000
2018-09-20 17:08:40 http://192.168.0.31/edit_self.aspx sql=
select
			us_username [username],
			isnull(us_firstname,'') [firstname],
			isnull(us_lastname,'') [lastname],
			isnull(us_bugs_per_page,10) [us_bugs_per_page],
			us_use_fckeditor,
			us_enable_bug_list_popups,
			isnull(us_email,'') [email],
			us_enable_notifications,
			us_send_notifications_to_self,
            us_reported_notifications,
            us_assigned_notifications,
            us_subscribed_notifications,
			us_auto_subscribe,
			us_auto_subscribe_own_bugs,
			us_auto_subscribe_reported_bugs,
			us_default_query,
			isnull(us_signature,'') [signature]
			from users
			where us_id = 1
2018-09-20 17:08:40 http://192.168.0.31/edit_self.aspx elapsed milliseconds:0000
2018-09-20 17:10:23 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 17:10:23 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 17:10:23 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 17:10:23 http://192.168.0.31/bugs.aspx elapsed milliseconds:0002
2018-09-20 17:10:23 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-09-20 17:10:23 http://192.168.0.31/bugs.aspx elapsed milliseconds:0003
2018-09-20 17:10:23 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 17:10:23 http://192.168.0.31/bugs.aspx elapsed milliseconds:0017
2018-09-20 17:10:24 http://192.168.0.31/ajax.aspx?bugid=24 sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = 'a65f55d9-194b-4866-b9d3-273d93b759e1'
and us_active = 1
2018-09-20 17:10:24 http://192.168.0.31/ajax.aspx?bugid=24 elapsed milliseconds:0000
2018-09-20 17:10:24 http://192.168.0.31/ajax.aspx?bugid=24 sql=

declare @bg_org int

select isnull(pu_permission_level,2),
bg_org
from bugs
left outer join project_user_xref
on pu_project = bg_project
and pu_user = 1
where bg_id = 24
2018-09-20 17:10:24 http://192.168.0.31/ajax.aspx?bugid=24 elapsed milliseconds:0003
2018-09-20 17:10:24 http://192.168.0.31/ajax.aspx?bugid=24 sql=

/* get_bug_posts */
select
a.bp_bug,
a.bp_comment,
isnull(us_username,'') [us_username],
case rtrim(us_firstname)
	when null then isnull(us_lastname, '')
	when '' then isnull(us_lastname, '')
	else isnull(us_lastname + ', ' + us_firstname,'')
	end [us_fullname],
isnull(us_email,'') [us_email],
a.bp_date,
datediff(s,a.bp_date,getdate()) [seconds_ago],
a.bp_id,
a.bp_type,
isnull(a.bp_email_from,'') bp_email_from,
isnull(a.bp_email_to,'') bp_email_to,
isnull(a.bp_email_cc,'') bp_email_cc,
isnull(a.bp_file,'') bp_file,
isnull(a.bp_size,0) bp_size,
isnull(a.bp_content_type,'') bp_content_type,
a.bp_hidden_from_external_users,
isnull(ba.bp_file,'') ba_file,  -- intentionally ba
isnull(ba.bp_id,'') ba_id, -- intentionally ba
isnull(ba.bp_size,'') ba_size,  -- intentionally ba
isnull(ba.bp_content_type,'') ba_content_type -- intentionally ba
from bug_posts a
left outer join users on us_id = a.bp_user
left outer join bug_posts ba on ba.bp_parent = a.bp_id and ba.bp_bug = a.bp_bug
where a.bp_bug = 24
and a.bp_parent is null
 and a.bp_type <> 'update'
 order by a.bp_id desc, ba.bp_parent, ba.bp_id
2018-09-20 17:10:24 http://192.168.0.31/ajax.aspx?bugid=24 elapsed milliseconds:0010
2018-09-20 17:10:30 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'a65f55d9-194b-4866-b9d3-273d93b759e1'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 17:10:30 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 17:24:10 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 17:24:10 http://192.168.0.31/default.aspx?msg=logged+off sql=

select us_username, us_id, us_password, isnull(us_salt,0) us_salt, us_active
from users
where us_username = N'admin'
2018-09-20 17:24:10 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0002
2018-09-20 17:24:10 http://192.168.0.31/default.aspx?msg=logged+off sql=
update users set us_most_recent_login_datetime = getdate() where us_id = 1
2018-09-20 17:24:10 http://192.168.0.31/default.aspx?msg=logged+off sql=
select us_id from users where us_username = N'admin'
2018-09-20 17:24:10 http://192.168.0.31/default.aspx?msg=logged+off elapsed milliseconds:0001
2018-09-20 17:24:10 http://192.168.0.31/default.aspx?msg=logged+off guid=3791fe9e-581e-4ba0-8c10-3024774e09ab
2018-09-20 17:24:10 http://192.168.0.31/default.aspx?msg=logged+off sql=
insert into sessions (se_id, se_user) values('3791fe9e-581e-4ba0-8c10-3024774e09ab', 1)
2018-09-20 17:24:10 http://192.168.0.31/default.aspx?msg=logged+off AppPath:
2018-09-20 17:24:10 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '3791fe9e-581e-4ba0-8c10-3024774e09ab';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '3791fe9e-581e-4ba0-8c10-3024774e09ab'
and us_active = 1
2018-09-20 17:24:10 http://192.168.0.31/bugs.aspx elapsed milliseconds:0007
2018-09-20 17:24:10 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 17:24:10 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 17:24:10 http://192.168.0.31/bugs.aspx sql=
select qu_id, qu_sql from queries where qu_id in
			(select us_default_query from users where us_id = 1)
2018-09-20 17:24:10 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 17:24:10 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 17:24:10 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 17:24:55 http://192.168.0.31/bugs.aspx sql=

/* check session */
declare @project_admin int
select @project_admin = count(1)
	from sessions
	inner join project_user_xref on pu_user = se_user
	and pu_admin = 1
	where se_id = '3791fe9e-581e-4ba0-8c10-3024774e09ab';

select us_id, us_admin,
us_username, us_firstname, us_lastname,
isnull(us_email,'') us_email,
isnull(us_bugs_per_page,10) us_bugs_per_page,
isnull(us_forced_project,0) us_forced_project,
us_use_fckeditor,
us_enable_bug_list_popups,
og.*,
isnull(us_forced_project, 0 ) us_forced_project,
isnull(pu_permission_level, 2) pu_permission_level,
@project_admin [project_admin]
from sessions
inner join users on se_user = us_id
inner join orgs og on us_org = og_id
left outer join project_user_xref
	on pu_project = us_forced_project
	and pu_user = us_id
where se_id = '3791fe9e-581e-4ba0-8c10-3024774e09ab'
and us_active = 1
2018-09-20 17:24:55 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 17:24:55 http://192.168.0.31/bugs.aspx sql=
/* query dropdown */
select qu_id, qu_desc
from queries
where (isnull(qu_user,0) = 0 and isnull(qu_org,0) = 0)
or isnull(qu_user,0) = 1
or isnull(qu_org,0) = 1
order by qu_desc
2018-09-20 17:24:55 http://192.168.0.31/bugs.aspx elapsed milliseconds:0000
2018-09-20 17:24:55 http://192.168.0.31/bugs.aspx sql=
select qu_sql from queries where qu_id = 1
2018-09-20 17:24:55 http://192.168.0.31/bugs.aspx sql=
select isnull(pr_background_color,'#ffffff'), bg_id [id], isnull(bu_flag,0) [$FLAG], 
 bg_short_desc [desc], isnull(pj_name,'') [project], isnull(bg_project_custom_dropdown_value1,'') [Version], isnull(og_name,'') [organization], isnull(ct_name,'') [category], rpt.us_username [reported by],
 bg_reported_date [reported on], isnull(pr_name,'') [priority], isnull(asg.us_username,'') [assigned to],
 isnull(st_name,'') [status], isnull(lu.us_username,'') [last updated by], bg_last_updated_date [last updated on]
 from bugs 
 left outer join bug_user on bu_bug = bg_id and bu_user = 1 
 left outer join users rpt on rpt.us_id = bg_reported_user
 left outer join users asg on asg.us_id = bg_assigned_to_user
 left outer join users lu on lu.us_id = bg_last_updated_user
 left outer join projects on pj_id = bg_project
 left outer join orgs on og_id = bg_org
 left outer join categories on ct_id = bg_category
 left outer join priorities on pr_id = bg_priority
 left outer join statuses on st_id = bg_status
  /* altered - just order by  */ WHERE  (bugs.bg_project not in (
					select pu_project
					from project_user_xref
					where pu_user = 1
					and pu_permission_level = 0)) order by bg_id desc
2018-09-20 17:24:55 http://192.168.0.31/bugs.aspx elapsed milliseconds:0001
2018-09-20 17:57:05  caught exception in util.set_context:Request is not available in this context
2018-09-20 17:57:05  threadproc_votes
2018-09-20 17:57:05  sql=

if exists (select * from dbo.sysobjects where id = object_id(N'[votes_view]'))
drop view [votes_view]
2018-09-20 17:57:05  started creating Lucene index using folder C:\btnet\www\App_Data\lucene_index
2018-09-20 17:57:05  sql=

/* get searchable cols */					
select sc.name
from syscolumns sc
inner join systypes st on st.xusertype = sc.xusertype
inner join sysobjects so on sc.id = so.id
where so.name = 'bugs'
and st.[name] <> 'sysname'
and sc.name not in ('rowguid',
'bg_id',
'bg_short_desc',
'bg_reported_user',
'bg_reported_date',
'bg_project',
'bg_org',
'bg_category',
'bg_priority',
'bg_status',
'bg_assigned_to_user',
'bg_last_updated_user',
'bg_last_updated_date',
'bg_user_defined_attribute',
'bg_project_custom_dropdown_value1',
'bg_project_custom_dropdown_value2',
'bg_project_custom_dropdown_value3',
'bg_tags')
and st.[name] in ('nvarchar','varchar')
and sc.length > 30
2018-09-20 17:57:06 http://192.168.0.31/logoff.aspx sql=
delete from sessions
			where se_id = N'3791fe9e-581e-4ba0-8c10-3024774e09ab'
			or datediff(d, se_date, getdate()) > 2
2018-09-20 17:57:06  sql=

create view votes_view as
select bu_bug as vote_bug, sum(bu_vote) as vote_total
from bug_user
group by bu_bug
having sum(bu_vote) > 0
2018-09-20 17:57:06  sql=

select bu_bug, count(1)
from bug_user 
where bu_vote = 1
group by bu_bug
2018-09-20 17:57:06  elapsed milliseconds:0004
2018-09-20 17:57:06  elapsed milliseconds:0138
2018-09-20 17:57:06  sql=

select bg_id, 	

isnull(bg_tags,'') bg_tags,
bg_short_desc
from bugs
2018-09-20 17:57:06  elapsed milliseconds:0002
2018-09-20 17:57:06 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 17:57:06  sql=

select bp_bug, bp_id, 
isnull(bp_comment_search,bp_comment) [text] 
from bug_posts 
where bp_type <> 'update'
and bp_hidden_from_external_users = 0
2018-09-20 17:57:06  elapsed milliseconds:0076
2018-09-20 17:57:06  done creating Lucene index
2018-09-20 18:02:50 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 18:02:52 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 18:04:09 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 18:04:49 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
2018-09-20 18:05:12 http://192.168.0.31/default.aspx?msg=logged+off sql=
select count(1) from users
